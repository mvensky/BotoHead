source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/botocore/docs/params.py</b><br>


file stats: <b>155 lines, 31 executed: 20.0% covered</b>
<pre>
<font color="black">   1. # Copyright 2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. from botocore.docs.shape import ShapeDocumenter</font>
<font color="green">  14. from botocore.docs.utils import py_type_name</font>
<font color="black">  15. </font>
<font color="black">  16. </font>
<font color="green">  17. class BaseParamsDocumenter(ShapeDocumenter):</font>
<font color="green">  18.     def document_params(self, section, shape, include=None, exclude=None):</font>
<font color="black">  19.         &quot;&quot;&quot;Fills out the documentation for a section given a model shape.</font>
<font color="black">  20. </font>
<font color="black">  21.         :param section: The section to write the documentation to.</font>
<font color="black">  22. </font>
<font color="black">  23.         :param shape: The shape of the operation.</font>
<font color="black">  24. </font>
<font color="black">  25.         :type include: Dictionary where keys are parameter names and</font>
<font color="black">  26.             values are the shapes of the parameter names.</font>
<font color="black">  27.         :param include: The parameter shapes to include in the documentation.</font>
<font color="black">  28. </font>
<font color="black">  29.         :type exclude: List of the names of the parameters to exclude.</font>
<font color="black">  30.         :param exclude: The names of the parameters to exclude from</font>
<font color="black">  31.             documentation.</font>
<font color="black">  32.         &quot;&quot;&quot;</font>
<font color="red">  33.         history = []</font>
<font color="red">  34.         self.traverse_and_document_shape(</font>
<font color="red">  35.             section=section, shape=shape, history=history,</font>
<font color="red">  36.             name=None, include=include, exclude=exclude)</font>
<font color="black">  37. </font>
<font color="green">  38.     def document_recursive_shape(self, section, shape, **kwargs):</font>
<font color="red">  39.         self._add_member_documentation(section, shape, **kwargs)</font>
<font color="black">  40. </font>
<font color="green">  41.     def document_shape_default(self, section, shape, history, include=None,</font>
<font color="green">  42.                                exclude=None, **kwargs):</font>
<font color="red">  43.         self._add_member_documentation(section, shape, **kwargs)</font>
<font color="black">  44. </font>
<font color="green">  45.     def document_shape_type_list(self, section, shape, history, include=None,</font>
<font color="green">  46.                                  exclude=None, **kwargs):</font>
<font color="red">  47.         self._add_member_documentation(section, shape, **kwargs)</font>
<font color="red">  48.         param_shape = shape.member</font>
<font color="red">  49.         param_section = section.add_new_section(</font>
<font color="red">  50.             param_shape.name, context={'shape': shape.member.name})</font>
<font color="red">  51.         self._start_nested_param(param_section)</font>
<font color="red">  52.         self.traverse_and_document_shape(</font>
<font color="red">  53.             section=param_section, shape=param_shape,</font>
<font color="red">  54.             history=history, name=None)</font>
<font color="red">  55.         section = section.add_new_section('end-list')</font>
<font color="red">  56.         self._end_nested_param(section)</font>
<font color="black">  57. </font>
<font color="green">  58.     def document_shape_type_map(self, section, shape, history, include=None,</font>
<font color="green">  59.                                 exclude=None, **kwargs):</font>
<font color="red">  60.         self._add_member_documentation(section, shape, **kwargs)</font>
<font color="black">  61. </font>
<font color="red">  62.         key_section = section.add_new_section(</font>
<font color="red">  63.             'key', context={'shape': shape.key.name})</font>
<font color="red">  64.         self._start_nested_param(key_section)</font>
<font color="red">  65.         self._add_member_documentation(key_section, shape.key)</font>
<font color="black">  66. </font>
<font color="red">  67.         param_section = section.add_new_section(</font>
<font color="red">  68.             shape.value.name, context={'shape': shape.value.name})</font>
<font color="red">  69.         param_section.style.indent()</font>
<font color="red">  70.         self._start_nested_param(param_section)</font>
<font color="red">  71.         self.traverse_and_document_shape(</font>
<font color="red">  72.             section=param_section, shape=shape.value,</font>
<font color="red">  73.             history=history, name=None)</font>
<font color="black">  74. </font>
<font color="red">  75.         end_section = section.add_new_section('end-map')</font>
<font color="red">  76.         self._end_nested_param(end_section)</font>
<font color="red">  77.         self._end_nested_param(end_section)</font>
<font color="black">  78. </font>
<font color="black">  79.     def document_shape_type_structure(self, section, shape, history,</font>
<font color="green">  80.                                       include=None, exclude=None,</font>
<font color="green">  81.                                       name=None, **kwargs):</font>
<font color="red">  82.         members = self._add_members_to_shape(shape.members, include)</font>
<font color="red">  83.         self._add_member_documentation(section, shape, name=name)</font>
<font color="red">  84.         for param in members:</font>
<font color="red">  85.             if exclude and param in exclude:</font>
<font color="red">  86.                 continue</font>
<font color="red">  87.             param_shape = members[param]</font>
<font color="red">  88.             param_section = section.add_new_section(</font>
<font color="red">  89.                 param, context={'shape': param_shape.name})</font>
<font color="red">  90.             self._start_nested_param(param_section)</font>
<font color="red">  91.             self.traverse_and_document_shape(</font>
<font color="red">  92.                 section=param_section, shape=param_shape,</font>
<font color="red">  93.                 history=history, name=param)</font>
<font color="red">  94.         section = section.add_new_section('end-structure')</font>
<font color="red">  95.         self._end_nested_param(section)</font>
<font color="black">  96. </font>
<font color="green">  97.     def _add_member_documentation(self, section, shape, **kwargs):</font>
<font color="red">  98.         pass</font>
<font color="black">  99. </font>
<font color="green"> 100.     def _add_members_to_shape(self, members, include):</font>
<font color="red"> 101.         if include:</font>
<font color="red"> 102.             members = members.copy()</font>
<font color="red"> 103.             for param in include:</font>
<font color="red"> 104.                 members[param.name] = param</font>
<font color="red"> 105.         return members</font>
<font color="black"> 106. </font>
<font color="green"> 107.     def _document_non_top_level_param_type(self, type_section, shape):</font>
<font color="red"> 108.         special_py_type = self._get_special_py_type_name(shape)</font>
<font color="red"> 109.         py_type = py_type_name(shape.type_name)</font>
<font color="black"> 110. </font>
<font color="red"> 111.         type_format = '(%s) -- '</font>
<font color="red"> 112.         if special_py_type is not None:</font>
<font color="black"> 113.             # Special type can reference a linked class.</font>
<font color="black"> 114.             # Italicizing it blows away the link.</font>
<font color="red"> 115.             type_section.write(type_format % special_py_type)</font>
<font color="black"> 116.         else:</font>
<font color="red"> 117.             type_section.style.italics(type_format % py_type)</font>
<font color="black"> 118. </font>
<font color="green"> 119.     def _start_nested_param(self, section):</font>
<font color="red"> 120.         section.style.indent()</font>
<font color="red"> 121.         section.style.new_line()</font>
<font color="black"> 122. </font>
<font color="green"> 123.     def _end_nested_param(self, section):</font>
<font color="red"> 124.         section.style.dedent()</font>
<font color="red"> 125.         section.style.new_line()</font>
<font color="black"> 126. </font>
<font color="black"> 127. </font>
<font color="green"> 128. class ResponseParamsDocumenter(BaseParamsDocumenter):</font>
<font color="green"> 129.     &quot;&quot;&quot;Generates the description for the response parameters&quot;&quot;&quot;</font>
<font color="black"> 130. </font>
<font color="green"> 131.     EVENT_NAME = 'response-params'</font>
<font color="black"> 132. </font>
<font color="green"> 133.     def _add_member_documentation(self, section, shape, name=None, **kwargs):</font>
<font color="red"> 134.         name_section = section.add_new_section('param-name')</font>
<font color="red"> 135.         name_section.write('- ')</font>
<font color="red"> 136.         if name is not None:</font>
<font color="red"> 137.             name_section.style.bold('%s ' % name)</font>
<font color="red"> 138.         type_section = section.add_new_section('param-type')</font>
<font color="red"> 139.         self._document_non_top_level_param_type(type_section, shape)</font>
<font color="black"> 140. </font>
<font color="red"> 141.         documentation_section = section.add_new_section('param-documentation')</font>
<font color="red"> 142.         if shape.documentation:</font>
<font color="red"> 143.             documentation_section.style.indent()</font>
<font color="red"> 144.             documentation_section.include_doc_string(shape.documentation)</font>
<font color="red"> 145.         section.style.new_paragraph()</font>
<font color="black"> 146. </font>
<font color="green"> 147.     def document_shape_type_event_stream(self, section, shape, history,</font>
<font color="black"> 148.                                          **kwargs):</font>
<font color="red"> 149.         self.document_shape_type_structure(section, shape, history, **kwargs)</font>
<font color="black"> 150. </font>
<font color="black"> 151. </font>
<font color="green"> 152. class RequestParamsDocumenter(BaseParamsDocumenter):</font>
<font color="green"> 153.     &quot;&quot;&quot;Generates the description for the request parameters&quot;&quot;&quot;</font>
<font color="black"> 154. </font>
<font color="green"> 155.     EVENT_NAME = 'request-params'</font>
<font color="black"> 156. </font>
<font color="black"> 157.     def document_shape_type_structure(self, section, shape, history,</font>
<font color="green"> 158.                                       include=None, exclude=None, **kwargs):</font>
<font color="red"> 159.         if len(history) &gt; 1:</font>
<font color="red"> 160.             self._add_member_documentation(section, shape, **kwargs)</font>
<font color="red"> 161.             section.style.indent()</font>
<font color="red"> 162.         members = self._add_members_to_shape(shape.members, include)</font>
<font color="red"> 163.         for i, param in enumerate(members):</font>
<font color="red"> 164.             if exclude and param in exclude:</font>
<font color="red"> 165.                 continue</font>
<font color="red"> 166.             param_shape = members[param]</font>
<font color="red"> 167.             param_section = section.add_new_section(</font>
<font color="red"> 168.                 param, context={'shape': param_shape.name})</font>
<font color="red"> 169.             param_section.style.new_line()</font>
<font color="red"> 170.             is_required = param in shape.required_members</font>
<font color="red"> 171.             self.traverse_and_document_shape(</font>
<font color="red"> 172.                 section=param_section, shape=param_shape,</font>
<font color="red"> 173.                 history=history, name=param, is_required=is_required)</font>
<font color="red"> 174.         section = section.add_new_section('end-structure')</font>
<font color="red"> 175.         if len(history) &gt; 1:</font>
<font color="red"> 176.             section.style.dedent()</font>
<font color="red"> 177.         section.style.new_line()</font>
<font color="black"> 178. </font>
<font color="green"> 179.     def _add_member_documentation(self, section, shape, name=None,</font>
<font color="green"> 180.                                   is_top_level_param=False, is_required=False,</font>
<font color="black"> 181.                                   **kwargs):</font>
<font color="red"> 182.         py_type = self._get_special_py_type_name(shape)</font>
<font color="red"> 183.         if py_type is None:</font>
<font color="red"> 184.             py_type = py_type_name(shape.type_name)</font>
<font color="red"> 185.         if is_top_level_param:</font>
<font color="red"> 186.             type_section = section.add_new_section('param-type')</font>
<font color="red"> 187.             type_section.write(':type %s: %s' % (name, py_type))</font>
<font color="red"> 188.             end_type_section = type_section.add_new_section('end-param-type')</font>
<font color="red"> 189.             end_type_section.style.new_line()</font>
<font color="red"> 190.             name_section = section.add_new_section('param-name')</font>
<font color="red"> 191.             name_section.write(':param %s: ' % name)</font>
<font color="black"> 192. </font>
<font color="black"> 193.         else:</font>
<font color="red"> 194.             name_section = section.add_new_section('param-name')</font>
<font color="red"> 195.             name_section.write('- ')</font>
<font color="red"> 196.             if name is not None:</font>
<font color="red"> 197.                 name_section.style.bold('%s ' % name)</font>
<font color="red"> 198.             type_section = section.add_new_section('param-type')</font>
<font color="red"> 199.             self._document_non_top_level_param_type(type_section, shape)</font>
<font color="black"> 200. </font>
<font color="red"> 201.         if is_required:</font>
<font color="red"> 202.             is_required_section = section.add_new_section('is-required')</font>
<font color="red"> 203.             is_required_section.style.indent()</font>
<font color="red"> 204.             is_required_section.style.bold('[REQUIRED] ')</font>
<font color="red"> 205.         if shape.documentation:</font>
<font color="red"> 206.             documentation_section = section.add_new_section(</font>
<font color="red"> 207.                 'param-documentation')</font>
<font color="red"> 208.             documentation_section.style.indent()</font>
<font color="red"> 209.             documentation_section.include_doc_string(shape.documentation)</font>
<font color="red"> 210.             self._add_special_trait_documentation(documentation_section, shape)</font>
<font color="red"> 211.         end_param_section = section.add_new_section('end-param')</font>
<font color="red"> 212.         end_param_section.style.new_paragraph()</font>
<font color="black"> 213. </font>
<font color="green"> 214.     def _add_special_trait_documentation(self, section, shape):</font>
<font color="red"> 215.         if 'idempotencyToken' in shape.metadata:</font>
<font color="red"> 216.             self._append_idempotency_documentation(section)</font>
<font color="black"> 217. </font>
<font color="green"> 218.     def _append_idempotency_documentation(self, section):</font>
<font color="red"> 219.         docstring = 'This field is autopopulated if not provided.'</font>
<font color="red"> 220.         section.write(docstring)</font>
</pre>

