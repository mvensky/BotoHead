source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/botocore/__init__.py</b><br>


file stats: <b>53 lines, 45 executed: 84.9% covered</b>
<pre>
<font color="black">   1. # Copyright (c) 2012-2013 Mitch Garnaat http://garnaat.org/</font>
<font color="black">   2. # Copyright 2012-2014 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   3. #</font>
<font color="black">   4. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   5. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   6. # the License is located at</font>
<font color="black">   7. #</font>
<font color="black">   8. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   9. #</font>
<font color="black">  10. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  11. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  12. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  13. # language governing permissions and limitations under the License.</font>
<font color="black">  14. </font>
<font color="green">  15. import os</font>
<font color="green">  16. import re</font>
<font color="green">  17. import logging</font>
<font color="black">  18. </font>
<font color="green">  19. __version__ = '1.10.16'</font>
<font color="black">  20. </font>
<font color="black">  21. </font>
<font color="green">  22. class NullHandler(logging.Handler):</font>
<font color="green">  23.     def emit(self, record):</font>
<font color="red">  24.         pass</font>
<font color="black">  25. </font>
<font color="black">  26. # Configure default logger to do nothing</font>
<font color="green">  27. log = logging.getLogger('botocore')</font>
<font color="green">  28. log.addHandler(NullHandler())</font>
<font color="black">  29. </font>
<font color="black">  30. </font>
<font color="green">  31. _first_cap_regex = re.compile('(.)([A-Z][a-z]+)')</font>
<font color="green">  32. _number_cap_regex = re.compile('([a-z])([0-9]+)')</font>
<font color="green">  33. _end_cap_regex = re.compile('([a-z0-9])([A-Z])')</font>
<font color="black">  34. # The regex below handles the special case where some acryonym</font>
<font color="black">  35. # name is pluralized, e.g GatewayARNs, ListWebACLs, SomeCNAMEs.</font>
<font color="green">  36. _special_case_transform = re.compile('[A-Z]{3,}s$')</font>
<font color="black">  37. # Prepopulate the cache with special cases that don't match</font>
<font color="black">  38. # our regular transformation.</font>
<font color="green">  39. _xform_cache = {</font>
<font color="green">  40.     ('CreateCachediSCSIVolume', '_'): 'create_cached_iscsi_volume',</font>
<font color="green">  41.     ('CreateCachediSCSIVolume', '-'): 'create-cached-iscsi-volume',</font>
<font color="green">  42.     ('DescribeCachediSCSIVolumes', '_'): 'describe_cached_iscsi_volumes',</font>
<font color="green">  43.     ('DescribeCachediSCSIVolumes', '-'): 'describe-cached-iscsi-volumes',</font>
<font color="green">  44.     ('DescribeStorediSCSIVolumes', '_'): 'describe_stored_iscsi_volumes',</font>
<font color="green">  45.     ('DescribeStorediSCSIVolumes', '-'): 'describe-stored-iscsi-volumes',</font>
<font color="green">  46.     ('CreateStorediSCSIVolume', '_'): 'create_stored_iscsi_volume',</font>
<font color="green">  47.     ('CreateStorediSCSIVolume', '-'): 'create-stored-iscsi-volume',</font>
<font color="green">  48.     ('ListHITsForQualificationType', '_'): 'list_hits_for_qualification_type',</font>
<font color="green">  49.     ('ListHITsForQualificationType', '-'): 'list-hits-for-qualification-type',</font>
<font color="black">  50. }</font>
<font color="black">  51. # The items in this dict represent partial renames to apply globally to all</font>
<font color="black">  52. # services which might have a matching argument or operation. This way a</font>
<font color="black">  53. # common mis-translation can be fixed without having to call out each</font>
<font color="black">  54. # individual case.</font>
<font color="green">  55. _partial_renames = {</font>
<font color="green">  56.     'ipv-6': 'ipv6',</font>
<font color="green">  57.     'ipv_6': 'ipv6',</font>
<font color="black">  58. }</font>
<font color="green">  59. ScalarTypes = ('string', 'integer', 'boolean', 'timestamp', 'float', 'double')</font>
<font color="black">  60. </font>
<font color="green">  61. BOTOCORE_ROOT = os.path.dirname(os.path.abspath(__file__))</font>
<font color="black">  62. </font>
<font color="black">  63. </font>
<font color="black">  64. # Used to specify anonymous (unsigned) request signature</font>
<font color="green">  65. class UNSIGNED(object):</font>
<font color="green">  66.     def __copy__(self):</font>
<font color="red">  67.         return self</font>
<font color="black">  68. </font>
<font color="green">  69.     def __deepcopy__(self, memodict):</font>
<font color="red">  70.         return self</font>
<font color="black">  71. </font>
<font color="black">  72. </font>
<font color="green">  73. UNSIGNED = UNSIGNED()</font>
<font color="black">  74. </font>
<font color="black">  75. </font>
<font color="green">  76. def xform_name(name, sep='_', _xform_cache=_xform_cache,</font>
<font color="green">  77.                partial_renames=_partial_renames):</font>
<font color="black">  78.     &quot;&quot;&quot;Convert camel case to a &quot;pythonic&quot; name.</font>
<font color="black">  79. </font>
<font color="black">  80.     If the name contains the ``sep`` character, then it is</font>
<font color="black">  81.     returned unchanged.</font>
<font color="black">  82. </font>
<font color="black">  83.     &quot;&quot;&quot;</font>
<font color="green">  84.     if sep in name:</font>
<font color="black">  85.         # If the sep is in the name, assume that it's already</font>
<font color="black">  86.         # transformed and return the string unchanged.</font>
<font color="red">  87.         return name</font>
<font color="green">  88.     key = (name, sep)</font>
<font color="green">  89.     if key not in _xform_cache:</font>
<font color="green">  90.         if _special_case_transform.search(name) is not None:</font>
<font color="red">  91.             is_special = _special_case_transform.search(name)</font>
<font color="red">  92.             matched = is_special.group()</font>
<font color="black">  93.             # Replace something like ARNs, ACLs with _arns, _acls.</font>
<font color="red">  94.             name = name[:-len(matched)] + sep + matched.lower()</font>
<font color="green">  95.         s1 = _first_cap_regex.sub(r'\1' + sep + r'\2', name)</font>
<font color="green">  96.         s2 = _number_cap_regex.sub(r'\1' + sep + r'\2', s1)</font>
<font color="green">  97.         transformed = _end_cap_regex.sub(r'\1' + sep + r'\2', s2).lower()</font>
<font color="black">  98. </font>
<font color="black">  99.         # Do partial renames</font>
<font color="green"> 100.         for old, new in partial_renames.items():</font>
<font color="green"> 101.             if old in transformed:</font>
<font color="red"> 102.                 transformed = transformed.replace(old, new)</font>
<font color="green"> 103.         _xform_cache[key] = transformed</font>
<font color="green"> 104.     return _xform_cache[key]</font>
</pre>

