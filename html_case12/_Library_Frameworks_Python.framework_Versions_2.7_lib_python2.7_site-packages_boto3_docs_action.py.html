source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto3/docs/action.py</b><br>


file stats: <b>80 lines, 14 executed: 17.5% covered</b>
<pre>
<font color="black">   1. # Copyright 2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. from botocore import xform_name</font>
<font color="green">  14. from botocore.model import OperationModel</font>
<font color="green">  15. from botocore.utils import get_service_module_name</font>
<font color="green">  16. from botocore.docs.method import document_model_driven_method</font>
<font color="green">  17. from botocore.docs.method import document_custom_method</font>
<font color="black">  18. </font>
<font color="green">  19. from boto3.docs.base import BaseDocumenter</font>
<font color="green">  20. from boto3.docs.method import document_model_driven_resource_method</font>
<font color="green">  21. from boto3.docs.utils import get_resource_ignore_params</font>
<font color="green">  22. from boto3.docs.utils import get_resource_public_actions</font>
<font color="green">  23. from boto3.docs.utils import add_resource_type_overview</font>
<font color="black">  24. </font>
<font color="black">  25. </font>
<font color="green">  26. class ActionDocumenter(BaseDocumenter):</font>
<font color="green">  27.     def document_actions(self, section):</font>
<font color="red">  28.         modeled_actions_list = self._resource_model.actions</font>
<font color="red">  29.         modeled_actions = {}</font>
<font color="red">  30.         for modeled_action in modeled_actions_list:</font>
<font color="red">  31.             modeled_actions[modeled_action.name] = modeled_action</font>
<font color="red">  32.         resource_actions = get_resource_public_actions(</font>
<font color="red">  33.             self._resource.__class__)</font>
<font color="red">  34.         self.member_map['actions'] = sorted(resource_actions)</font>
<font color="red">  35.         add_resource_type_overview(</font>
<font color="red">  36.             section=section,</font>
<font color="red">  37.             resource_type='Actions',</font>
<font color="black">  38.             description=(</font>
<font color="red">  39.                 'Actions call operations on resources.  They may '</font>
<font color="black">  40.                 'automatically handle the passing in of arguments set '</font>
<font color="black">  41.                 'from identifiers and some attributes.'),</font>
<font color="red">  42.             intro_link='actions_intro')</font>
<font color="black">  43. </font>
<font color="red">  44.         for action_name in sorted(resource_actions):</font>
<font color="red">  45.             action_section = section.add_new_section(action_name)</font>
<font color="red">  46.             if action_name in ['load', 'reload'] and self._resource_model.load:</font>
<font color="red">  47.                 document_load_reload_action(</font>
<font color="red">  48.                     section=action_section,</font>
<font color="red">  49.                     action_name=action_name,</font>
<font color="red">  50.                     resource_name=self._resource_name,</font>
<font color="red">  51.                     event_emitter=self._resource.meta.client.meta.events,</font>
<font color="red">  52.                     load_model=self._resource_model.load,</font>
<font color="red">  53.                     service_model=self._service_model</font>
<font color="black">  54.                 )</font>
<font color="red">  55.             elif action_name in modeled_actions:</font>
<font color="red">  56.                 document_action(</font>
<font color="red">  57.                     section=action_section,</font>
<font color="red">  58.                     resource_name=self._resource_name,</font>
<font color="red">  59.                     event_emitter=self._resource.meta.client.meta.events,</font>
<font color="red">  60.                     action_model=modeled_actions[action_name],</font>
<font color="red">  61.                     service_model=self._service_model,</font>
<font color="black">  62.                 )</font>
<font color="black">  63.             else:</font>
<font color="red">  64.                 document_custom_method(</font>
<font color="red">  65.                     action_section, action_name, resource_actions[action_name])</font>
<font color="black">  66. </font>
<font color="black">  67. </font>
<font color="black">  68. def document_action(section, resource_name, event_emitter, action_model,</font>
<font color="green">  69.                     service_model, include_signature=True):</font>
<font color="black">  70.     &quot;&quot;&quot;Documents a resource action</font>
<font color="black">  71. </font>
<font color="black">  72.     :param section: The section to write to</font>
<font color="black">  73. </font>
<font color="black">  74.     :param resource_name: The name of the resource</font>
<font color="black">  75. </font>
<font color="black">  76.     :param event_emitter: The event emitter to use to emit events</font>
<font color="black">  77. </font>
<font color="black">  78.     :param action_model: The model of the action</font>
<font color="black">  79. </font>
<font color="black">  80.     :param service_model: The model of the service</font>
<font color="black">  81. </font>
<font color="black">  82.     :param include_signature: Whether or not to include the signature.</font>
<font color="black">  83.         It is useful for generating docstrings.</font>
<font color="black">  84.     &quot;&quot;&quot;</font>
<font color="red">  85.     operation_model = service_model.operation_model(</font>
<font color="red">  86.         action_model.request.operation)</font>
<font color="red">  87.     ignore_params = get_resource_ignore_params(action_model.request.params)</font>
<font color="black">  88. </font>
<font color="red">  89.     example_return_value = 'response'</font>
<font color="red">  90.     if action_model.resource:</font>
<font color="red">  91.         example_return_value = xform_name(action_model.resource.type)</font>
<font color="red">  92.     example_resource_name = xform_name(resource_name)</font>
<font color="red">  93.     if service_model.service_name == resource_name:</font>
<font color="red">  94.         example_resource_name = resource_name</font>
<font color="red">  95.     example_prefix = '%s = %s.%s' % (</font>
<font color="red">  96.         example_return_value, example_resource_name, action_model.name)</font>
<font color="red">  97.     document_model_driven_resource_method(</font>
<font color="red">  98.         section=section, method_name=action_model.name,</font>
<font color="red">  99.         operation_model=operation_model,</font>
<font color="red"> 100.         event_emitter=event_emitter,</font>
<font color="red"> 101.         method_description=operation_model.documentation,</font>
<font color="red"> 102.         example_prefix=example_prefix,</font>
<font color="red"> 103.         exclude_input=ignore_params,</font>
<font color="red"> 104.         resource_action_model=action_model,</font>
<font color="red"> 105.         include_signature=include_signature</font>
<font color="black"> 106.     )</font>
<font color="black"> 107. </font>
<font color="black"> 108. </font>
<font color="black"> 109. def document_load_reload_action(section, action_name, resource_name,</font>
<font color="black"> 110.                                 event_emitter, load_model, service_model,</font>
<font color="green"> 111.                                 include_signature=True):</font>
<font color="black"> 112.     &quot;&quot;&quot;Documents the resource load action</font>
<font color="black"> 113. </font>
<font color="black"> 114.     :param section: The section to write to</font>
<font color="black"> 115. </font>
<font color="black"> 116.     :param action_name: The name of the loading action should be load or reload</font>
<font color="black"> 117. </font>
<font color="black"> 118.     :param resource_name: The name of the resource</font>
<font color="black"> 119. </font>
<font color="black"> 120.     :param event_emitter: The event emitter to use to emit events</font>
<font color="black"> 121. </font>
<font color="black"> 122.     :param load_model: The model of the load action</font>
<font color="black"> 123. </font>
<font color="black"> 124.     :param service_model: The model of the service</font>
<font color="black"> 125. </font>
<font color="black"> 126.     :param include_signature: Whether or not to include the signature.</font>
<font color="black"> 127.         It is useful for generating docstrings.</font>
<font color="black"> 128.     &quot;&quot;&quot;</font>
<font color="black"> 129.     description = (</font>
<font color="red"> 130.         'Calls  :py:meth:`%s.Client.%s` to update the attributes of the'</font>
<font color="black"> 131.         ' %s resource. Note that the load and reload methods are '</font>
<font color="black"> 132.         'the same method and can be used interchangeably.' % (</font>
<font color="red"> 133.             get_service_module_name(service_model),</font>
<font color="red"> 134.             xform_name(load_model.request.operation),</font>
<font color="red"> 135.             resource_name)</font>
<font color="black"> 136.     )</font>
<font color="red"> 137.     example_resource_name = xform_name(resource_name)</font>
<font color="red"> 138.     if service_model.service_name == resource_name:</font>
<font color="red"> 139.         example_resource_name = resource_name</font>
<font color="red"> 140.     example_prefix = '%s.%s' % (example_resource_name, action_name)</font>
<font color="red"> 141.     document_model_driven_method(</font>
<font color="red"> 142.         section=section, method_name=action_name,</font>
<font color="red"> 143.         operation_model=OperationModel({}, service_model),</font>
<font color="red"> 144.         event_emitter=event_emitter,</font>
<font color="red"> 145.         method_description=description,</font>
<font color="red"> 146.         example_prefix=example_prefix,</font>
<font color="red"> 147.         include_signature=include_signature</font>
<font color="black"> 148.     )</font>
</pre>

