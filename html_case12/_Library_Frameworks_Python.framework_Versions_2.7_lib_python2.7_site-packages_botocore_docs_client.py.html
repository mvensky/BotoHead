source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/botocore/docs/client.py</b><br>


file stats: <b>73 lines, 18 executed: 24.7% covered</b>
<pre>
<font color="black">   1. # Copyright 2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. import inspect</font>
<font color="black">  14. </font>
<font color="green">  15. from botocore.docs.utils import get_official_service_name</font>
<font color="green">  16. from botocore.docs.method import document_custom_method</font>
<font color="green">  17. from botocore.docs.method import document_model_driven_method</font>
<font color="green">  18. from botocore.docs.method import get_instance_public_methods</font>
<font color="green">  19. from botocore.docs.sharedexample import document_shared_examples</font>
<font color="black">  20. </font>
<font color="black">  21. </font>
<font color="green">  22. class ClientDocumenter(object):</font>
<font color="green">  23.     def __init__(self, client, shared_examples=None):</font>
<font color="red">  24.         self._client = client</font>
<font color="red">  25.         self._shared_examples = shared_examples</font>
<font color="red">  26.         if self._shared_examples is None:</font>
<font color="red">  27.             self._shared_examples = {}</font>
<font color="red">  28.         self._service_name = self._client.meta.service_model.service_name</font>
<font color="black">  29. </font>
<font color="green">  30.     def document_client(self, section):</font>
<font color="black">  31.         &quot;&quot;&quot;Documents a client and its methods</font>
<font color="black">  32. </font>
<font color="black">  33.         :param section: The section to write to.</font>
<font color="black">  34.         &quot;&quot;&quot;</font>
<font color="red">  35.         self._add_title(section)</font>
<font color="red">  36.         self._add_class_signature(section)</font>
<font color="red">  37.         client_methods = get_instance_public_methods(self._client)</font>
<font color="red">  38.         self._add_client_intro(section, client_methods)</font>
<font color="red">  39.         self._add_client_methods(section, client_methods)</font>
<font color="black">  40. </font>
<font color="green">  41.     def _add_title(self, section):</font>
<font color="red">  42.         section.style.h2('Client')</font>
<font color="black">  43. </font>
<font color="green">  44.     def _add_client_intro(self, section, client_methods):</font>
<font color="red">  45.         section = section.add_new_section('intro')</font>
<font color="black">  46.         # Write out the top level description for the client.</font>
<font color="red">  47.         official_service_name = get_official_service_name(</font>
<font color="red">  48.             self._client.meta.service_model)</font>
<font color="red">  49.         section.write(</font>
<font color="red">  50.             'A low-level client representing %s' % official_service_name)</font>
<font color="black">  51. </font>
<font color="black">  52.         # Write out the client example instantiation.</font>
<font color="red">  53.         self._add_client_creation_example(section)</font>
<font color="black">  54. </font>
<font color="black">  55.         # List out all of the possible client methods.</font>
<font color="red">  56.         section.style.new_line()</font>
<font color="red">  57.         section.write('These are the available methods:')</font>
<font color="red">  58.         section.style.new_line()</font>
<font color="red">  59.         class_name = self._client.__class__.__name__</font>
<font color="red">  60.         for method_name in sorted(client_methods):</font>
<font color="red">  61.             section.style.li(':py:meth:`~%s.Client.%s`' % (</font>
<font color="red">  62.                 class_name, method_name))</font>
<font color="black">  63. </font>
<font color="green">  64.     def _add_class_signature(self, section):</font>
<font color="red">  65.         section.style.start_sphinx_py_class(</font>
<font color="red">  66.             class_name='%s.Client' % self._client.__class__.__name__)</font>
<font color="black">  67. </font>
<font color="green">  68.     def _add_client_creation_example(self, section):</font>
<font color="red">  69.         section.style.start_codeblock()</font>
<font color="red">  70.         section.style.new_line()</font>
<font color="red">  71.         section.write(</font>
<font color="red">  72.             'client = session.create_client(\'{service}\')'.format(</font>
<font color="red">  73.                 service=self._service_name)</font>
<font color="black">  74.         )</font>
<font color="red">  75.         section.style.end_codeblock()</font>
<font color="black">  76. </font>
<font color="green">  77.     def _add_client_methods(self, section, client_methods):</font>
<font color="red">  78.         section = section.add_new_section('methods')</font>
<font color="red">  79.         for method_name in sorted(client_methods):</font>
<font color="red">  80.             self._add_client_method(</font>
<font color="red">  81.                 section, method_name, client_methods[method_name])</font>
<font color="black">  82. </font>
<font color="green">  83.     def _add_client_method(self, section, method_name, method):</font>
<font color="red">  84.         section = section.add_new_section(method_name)</font>
<font color="red">  85.         if self._is_custom_method(method_name):</font>
<font color="red">  86.             self._add_custom_method(section, method_name, method)</font>
<font color="black">  87.         else:</font>
<font color="red">  88.             self._add_model_driven_method(section, method_name)</font>
<font color="black">  89. </font>
<font color="green">  90.     def _is_custom_method(self, method_name):</font>
<font color="red">  91.         return method_name not in self._client.meta.method_to_api_mapping</font>
<font color="black">  92. </font>
<font color="green">  93.     def _add_custom_method(self, section, method_name, method):</font>
<font color="red">  94.         document_custom_method(section, method_name, method)</font>
<font color="black">  95. </font>
<font color="green">  96.     def _add_model_driven_method(self, section, method_name):</font>
<font color="red">  97.         service_model = self._client.meta.service_model</font>
<font color="red">  98.         operation_name = self._client.meta.method_to_api_mapping[method_name]</font>
<font color="red">  99.         operation_model = service_model.operation_model(operation_name)</font>
<font color="black"> 100. </font>
<font color="red"> 101.         example_prefix = 'response = client.%s' % method_name</font>
<font color="red"> 102.         document_model_driven_method(</font>
<font color="red"> 103.             section, method_name, operation_model,</font>
<font color="red"> 104.             event_emitter=self._client.meta.events,</font>
<font color="red"> 105.             method_description=operation_model.documentation,</font>
<font color="red"> 106.             example_prefix=example_prefix,</font>
<font color="black"> 107.         )</font>
<font color="black"> 108. </font>
<font color="black"> 109.         # Add the shared examples</font>
<font color="red"> 110.         shared_examples = self._shared_examples.get(operation_name)</font>
<font color="red"> 111.         if shared_examples:</font>
<font color="red"> 112.             document_shared_examples(</font>
<font color="red"> 113.                 section, operation_model, example_prefix, shared_examples)</font>
</pre>

