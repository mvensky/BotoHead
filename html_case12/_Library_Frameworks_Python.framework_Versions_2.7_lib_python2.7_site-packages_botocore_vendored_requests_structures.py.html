source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/botocore/vendored/requests/structures.py</b><br>


file stats: <b>43 lines, 30 executed: 69.8% covered</b>
<pre>
<font color="black">   1. # -*- coding: utf-8 -*-</font>
<font color="black">   2. </font>
<font color="black">   3. &quot;&quot;&quot;</font>
<font color="black">   4. requests.structures</font>
<font color="black">   5. ~~~~~~~~~~~~~~~~~~~</font>
<font color="black">   6. </font>
<font color="black">   7. Data structures that power Requests.</font>
<font color="black">   8. </font>
<font color="green">   9. &quot;&quot;&quot;</font>
<font color="black">  10. </font>
<font color="green">  11. import collections</font>
<font color="black">  12. </font>
<font color="black">  13. </font>
<font color="green">  14. class CaseInsensitiveDict(collections.MutableMapping):</font>
<font color="black">  15.     &quot;&quot;&quot;</font>
<font color="black">  16.     A case-insensitive ``dict``-like object.</font>
<font color="black">  17. </font>
<font color="black">  18.     Implements all methods and operations of</font>
<font color="black">  19.     ``collections.MutableMapping`` as well as dict's ``copy``. Also</font>
<font color="black">  20.     provides ``lower_items``.</font>
<font color="black">  21. </font>
<font color="black">  22.     All keys are expected to be strings. The structure remembers the</font>
<font color="black">  23.     case of the last key to be set, and ``iter(instance)``,</font>
<font color="black">  24.     ``keys()``, ``items()``, ``iterkeys()``, and ``iteritems()``</font>
<font color="black">  25.     will contain case-sensitive keys. However, querying and contains</font>
<font color="black">  26.     testing is case insensitive::</font>
<font color="black">  27. </font>
<font color="black">  28.         cid = CaseInsensitiveDict()</font>
<font color="black">  29.         cid['Accept'] = 'application/json'</font>
<font color="black">  30.         cid['aCCEPT'] == 'application/json'  # True</font>
<font color="black">  31.         list(cid) == ['Accept']  # True</font>
<font color="black">  32. </font>
<font color="black">  33.     For example, ``headers['content-encoding']`` will return the</font>
<font color="black">  34.     value of a ``'Content-Encoding'`` response header, regardless</font>
<font color="black">  35.     of how the header name was originally stored.</font>
<font color="black">  36. </font>
<font color="black">  37.     If the constructor, ``.update``, or equality comparison</font>
<font color="black">  38.     operations are given keys that have equal ``.lower()``s, the</font>
<font color="black">  39.     behavior is undefined.</font>
<font color="black">  40. </font>
<font color="green">  41.     &quot;&quot;&quot;</font>
<font color="green">  42.     def __init__(self, data=None, **kwargs):</font>
<font color="green">  43.         self._store = dict()</font>
<font color="green">  44.         if data is None:</font>
<font color="green">  45.             data = {}</font>
<font color="green">  46.         self.update(data, **kwargs)</font>
<font color="black">  47. </font>
<font color="green">  48.     def __setitem__(self, key, value):</font>
<font color="black">  49.         # Use the lowercased key for lookups, but store the actual</font>
<font color="black">  50.         # key alongside the value.</font>
<font color="green">  51.         self._store[key.lower()] = (key, value)</font>
<font color="black">  52. </font>
<font color="green">  53.     def __getitem__(self, key):</font>
<font color="green">  54.         return self._store[key.lower()][1]</font>
<font color="black">  55. </font>
<font color="green">  56.     def __delitem__(self, key):</font>
<font color="red">  57.         del self._store[key.lower()]</font>
<font color="black">  58. </font>
<font color="green">  59.     def __iter__(self):</font>
<font color="green">  60.         return (casedkey for casedkey, mappedvalue in self._store.values())</font>
<font color="black">  61. </font>
<font color="green">  62.     def __len__(self):</font>
<font color="green">  63.         return len(self._store)</font>
<font color="black">  64. </font>
<font color="green">  65.     def lower_items(self):</font>
<font color="black">  66.         &quot;&quot;&quot;Like iteritems(), but with all lowercase keys.&quot;&quot;&quot;</font>
<font color="black">  67.         return (</font>
<font color="red">  68.             (lowerkey, keyval[1])</font>
<font color="red">  69.             for (lowerkey, keyval)</font>
<font color="red">  70.             in self._store.items()</font>
<font color="black">  71.         )</font>
<font color="black">  72. </font>
<font color="green">  73.     def __eq__(self, other):</font>
<font color="red">  74.         if isinstance(other, collections.Mapping):</font>
<font color="red">  75.             other = CaseInsensitiveDict(other)</font>
<font color="black">  76.         else:</font>
<font color="red">  77.             return NotImplemented</font>
<font color="black">  78.         # Compare insensitively</font>
<font color="red">  79.         return dict(self.lower_items()) == dict(other.lower_items())</font>
<font color="black">  80. </font>
<font color="black">  81.     # Copy is required</font>
<font color="green">  82.     def copy(self):</font>
<font color="red">  83.         return CaseInsensitiveDict(self._store.values())</font>
<font color="black">  84. </font>
<font color="green">  85.     def __repr__(self):</font>
<font color="red">  86.         return str(dict(self.items()))</font>
<font color="black">  87. </font>
<font color="green">  88. class LookupDict(dict):</font>
<font color="green">  89.     &quot;&quot;&quot;Dictionary lookup object.&quot;&quot;&quot;</font>
<font color="black">  90. </font>
<font color="green">  91.     def __init__(self, name=None):</font>
<font color="green">  92.         self.name = name</font>
<font color="green">  93.         super(LookupDict, self).__init__()</font>
<font color="black">  94. </font>
<font color="green">  95.     def __repr__(self):</font>
<font color="red">  96.         return '&lt;lookup \'%s\'&gt;' % (self.name)</font>
<font color="black">  97. </font>
<font color="green">  98.     def __getitem__(self, key):</font>
<font color="black">  99.         # We allow fall-through here, so values default to None</font>
<font color="black"> 100. </font>
<font color="red"> 101.         return self.__dict__.get(key, None)</font>
<font color="black"> 102. </font>
<font color="green"> 103.     def get(self, key, default=None):</font>
<font color="red"> 104.         return self.__dict__.get(key, default)</font>
</pre>

