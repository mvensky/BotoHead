source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/botocore/docs/service.py</b><br>


file stats: <b>60 lines, 15 executed: 25.0% covered</b>
<pre>
<font color="black">   1. # Copyright 2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. from botocore.exceptions import DataNotFoundError</font>
<font color="green">  14. from botocore.docs.utils import get_official_service_name</font>
<font color="green">  15. from botocore.docs.client import ClientDocumenter</font>
<font color="green">  16. from botocore.docs.waiter import WaiterDocumenter</font>
<font color="green">  17. from botocore.docs.paginator import PaginatorDocumenter</font>
<font color="green">  18. from botocore.docs.bcdoc.restdoc import DocumentStructure</font>
<font color="black">  19. </font>
<font color="black">  20. </font>
<font color="green">  21. class ServiceDocumenter(object):</font>
<font color="green">  22.     def __init__(self, service_name, session):</font>
<font color="red">  23.         self._session = session</font>
<font color="red">  24.         self._service_name = service_name</font>
<font color="black">  25. </font>
<font color="red">  26.         self._client = self._session.create_client(</font>
<font color="red">  27.             service_name, region_name='us-east-1', aws_access_key_id='foo',</font>
<font color="red">  28.             aws_secret_access_key='bar')</font>
<font color="black">  29. </font>
<font color="black">  30.         self.sections = [</font>
<font color="red">  31.             'title',</font>
<font color="red">  32.             'table-of-contents',</font>
<font color="red">  33.             'client-api',</font>
<font color="red">  34.             'paginator-api',</font>
<font color="red">  35.             'waiter-api'</font>
<font color="black">  36.         ]</font>
<font color="black">  37. </font>
<font color="green">  38.     def document_service(self):</font>
<font color="black">  39.         &quot;&quot;&quot;Documents an entire service.</font>
<font color="black">  40. </font>
<font color="black">  41.         :returns: The reStructured text of the documented service.</font>
<font color="black">  42.         &quot;&quot;&quot;</font>
<font color="red">  43.         doc_structure = DocumentStructure(</font>
<font color="red">  44.             self._service_name, section_names=self.sections,</font>
<font color="red">  45.             target='html')</font>
<font color="red">  46.         self.title(doc_structure.get_section('title'))</font>
<font color="red">  47.         self.table_of_contents(doc_structure.get_section('table-of-contents'))</font>
<font color="red">  48.         self.client_api(doc_structure.get_section('client-api'))</font>
<font color="red">  49.         self.paginator_api(doc_structure.get_section('paginator-api'))</font>
<font color="red">  50.         self.waiter_api(doc_structure.get_section('waiter-api'))</font>
<font color="red">  51.         return doc_structure.flush_structure()</font>
<font color="black">  52. </font>
<font color="green">  53.     def title(self, section):</font>
<font color="red">  54.         section.style.h1(self._client.__class__.__name__)</font>
<font color="black">  55. </font>
<font color="green">  56.     def table_of_contents(self, section):</font>
<font color="red">  57.         section.style.table_of_contents(title='Table of Contents', depth=2)</font>
<font color="black">  58. </font>
<font color="green">  59.     def client_api(self, section):</font>
<font color="red">  60.         examples = None</font>
<font color="red">  61.         try:</font>
<font color="red">  62.             examples = self.get_examples(self._service_name)</font>
<font color="red">  63.         except DataNotFoundError:</font>
<font color="red">  64.             pass</font>
<font color="black">  65. </font>
<font color="red">  66.         ClientDocumenter(self._client, examples).document_client(section)</font>
<font color="black">  67. </font>
<font color="green">  68.     def paginator_api(self, section):</font>
<font color="red">  69.         try:</font>
<font color="red">  70.             service_paginator_model = self._session.get_paginator_model(</font>
<font color="red">  71.                 self._service_name)</font>
<font color="red">  72.         except DataNotFoundError:</font>
<font color="red">  73.             return</font>
<font color="red">  74.         paginator_documenter = PaginatorDocumenter(</font>
<font color="red">  75.             self._client, service_paginator_model)</font>
<font color="red">  76.         paginator_documenter.document_paginators(section)</font>
<font color="black">  77. </font>
<font color="green">  78.     def waiter_api(self, section):</font>
<font color="red">  79.         if self._client.waiter_names:</font>
<font color="red">  80.             service_waiter_model = self._session.get_waiter_model(</font>
<font color="red">  81.                 self._service_name)</font>
<font color="red">  82.             waiter_documenter = WaiterDocumenter(</font>
<font color="red">  83.                 self._client, service_waiter_model)</font>
<font color="red">  84.             waiter_documenter.document_waiters(section)</font>
<font color="black">  85. </font>
<font color="green">  86.     def get_examples(self, service_name, api_version=None):</font>
<font color="red">  87.         loader = self._session.get_component('data_loader')</font>
<font color="red">  88.         examples = loader.load_service_model(</font>
<font color="red">  89.             service_name, 'examples-1', api_version)</font>
<font color="red">  90.         return examples['examples']</font>
</pre>

