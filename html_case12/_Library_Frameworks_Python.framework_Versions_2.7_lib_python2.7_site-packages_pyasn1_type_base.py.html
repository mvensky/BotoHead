source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/pyasn1/type/base.py</b><br>


file stats: <b>255 lines, 140 executed: 54.9% covered</b>
<pre>
<font color="black">   1. #</font>
<font color="black">   2. # This file is part of pyasn1 software.</font>
<font color="black">   3. #</font>
<font color="black">   4. # Copyright (c) 2005-2017, Ilya Etingof &lt;etingof@gmail.com&gt;</font>
<font color="black">   5. # License: http://pyasn1.sf.net/license.html</font>
<font color="black">   6. #</font>
<font color="green">   7. import sys</font>
<font color="green">   8. from pyasn1.type import constraint, tagmap, tag</font>
<font color="green">   9. from pyasn1 import error</font>
<font color="black">  10. </font>
<font color="green">  11. __all__ = ['Asn1Item', 'Asn1ItemBase', 'AbstractSimpleAsn1Item', 'AbstractConstructedAsn1Item']</font>
<font color="black">  12. </font>
<font color="black">  13. </font>
<font color="green">  14. class Asn1Item(object):</font>
<font color="green">  15.     pass</font>
<font color="black">  16. </font>
<font color="black">  17. </font>
<font color="green">  18. class Asn1ItemBase(Asn1Item):</font>
<font color="black">  19.     #: Default :py:class:`~pyasn1.type.tag.TagSet` object representing</font>
<font color="black">  20.     #: ASN.1 tag(s) associated with this ASN.1 type.</font>
<font color="green">  21.     tagSet = tag.TagSet()</font>
<font color="black">  22. </font>
<font color="black">  23.     #: Default :py:class:`~pyasn1.type.constraint.ConstraintsIntersection`</font>
<font color="black">  24.     #: object imposing constraints on initialization values.</font>
<font color="green">  25.     subtypeSpec = constraint.ConstraintsIntersection()</font>
<font color="black">  26. </font>
<font color="black">  27.     # Used for ambiguous ASN.1 types identification</font>
<font color="green">  28.     typeId = None</font>
<font color="black">  29. </font>
<font color="green">  30.     def __init__(self, tagSet=None, subtypeSpec=None):</font>
<font color="green">  31.         if tagSet is None:</font>
<font color="green">  32.             self._tagSet = self.tagSet</font>
<font color="black">  33.         else:</font>
<font color="green">  34.             self._tagSet = tagSet</font>
<font color="green">  35.         if subtypeSpec is None:</font>
<font color="green">  36.             self._subtypeSpec = self.subtypeSpec</font>
<font color="black">  37.         else:</font>
<font color="green">  38.             self._subtypeSpec = subtypeSpec</font>
<font color="black">  39. </font>
<font color="green">  40.     def _verifySubtypeSpec(self, value, idx=None):</font>
<font color="green">  41.         try:</font>
<font color="green">  42.             self._subtypeSpec(value, idx)</font>
<font color="red">  43.         except error.PyAsn1Error:</font>
<font color="red">  44.             c, i, t = sys.exc_info()</font>
<font color="red">  45.             raise c('%s at %s' % (i, self.__class__.__name__))</font>
<font color="black">  46. </font>
<font color="green">  47.     def getSubtypeSpec(self):</font>
<font color="red">  48.         return self._subtypeSpec</font>
<font color="black">  49. </font>
<font color="green">  50.     def getTagSet(self):</font>
<font color="red">  51.         return self._tagSet</font>
<font color="black">  52. </font>
<font color="green">  53.     def getEffectiveTagSet(self):</font>
<font color="red">  54.         return self._tagSet  # used by untagged types</font>
<font color="black">  55. </font>
<font color="green">  56.     def getTagMap(self):</font>
<font color="red">  57.         return tagmap.TagMap({self._tagSet: self})</font>
<font color="black">  58. </font>
<font color="green">  59.     def isSameTypeWith(self, other, matchTags=True, matchConstraints=True):</font>
<font color="black">  60.         &quot;&quot;&quot;Examine |ASN.1| type for equality with other ASN.1 type.</font>
<font color="black">  61. </font>
<font color="black">  62.         ASN.1 tags (:py:mod:`~pyasn1.type.tag`) and constraints</font>
<font color="black">  63.         (:py:mod:`~pyasn1.type.constraint`) are examined when carrying</font>
<font color="black">  64.         out ASN.1 types comparison.</font>
<font color="black">  65. </font>
<font color="black">  66.         No Python inheritance relationship between PyASN1 objects is considered.</font>
<font color="black">  67. </font>
<font color="black">  68.         Parameters</font>
<font color="black">  69.         ----------</font>
<font color="black">  70.         other: a pyasn1 type object</font>
<font color="black">  71.             Class instance representing ASN.1 type.</font>
<font color="black">  72. </font>
<font color="black">  73.         Returns</font>
<font color="black">  74.         -------</font>
<font color="black">  75.         : :class:`bool`</font>
<font color="black">  76.             :class:`True` if *other* is |ASN.1| type,</font>
<font color="black">  77.             :class:`False` otherwise.</font>
<font color="black">  78.         &quot;&quot;&quot;</font>
<font color="red">  79.         return self is other or \</font>
<font color="red">  80.             (not matchTags or</font>
<font color="red">  81.              self._tagSet == other.getTagSet()) and \</font>
<font color="red">  82.             (not matchConstraints or</font>
<font color="red">  83.              self._subtypeSpec == other.getSubtypeSpec())</font>
<font color="black">  84. </font>
<font color="green">  85.     def isSuperTypeOf(self, other, matchTags=True, matchConstraints=True):</font>
<font color="black">  86.         &quot;&quot;&quot;Examine |ASN.1| type for subtype relationship with other ASN.1 type.</font>
<font color="black">  87. </font>
<font color="black">  88.         ASN.1 tags (:py:mod:`~pyasn1.type.tag`) and constraints</font>
<font color="black">  89.         (:py:mod:`~pyasn1.type.constraint`) are examined when carrying</font>
<font color="black">  90.         out ASN.1 types comparison.</font>
<font color="black">  91. </font>
<font color="black">  92.         No Python inheritance relationship between PyASN1 objects is considered.</font>
<font color="black">  93. </font>
<font color="black">  94. </font>
<font color="black">  95.         Parameters</font>
<font color="black">  96.         ----------</font>
<font color="black">  97.             other: a pyasn1 type object</font>
<font color="black">  98.                 Class instance representing ASN.1 type.</font>
<font color="black">  99. </font>
<font color="black"> 100.         Returns</font>
<font color="black"> 101.         -------</font>
<font color="black"> 102.             : :class:`bool`</font>
<font color="black"> 103.                 :class:`True` if *other* is a subtype of |ASN.1| type,</font>
<font color="black"> 104.                 :class:`False` otherwise.</font>
<font color="black"> 105.         &quot;&quot;&quot;</font>
<font color="red"> 106.         return (not matchTags or</font>
<font color="red"> 107.                 self._tagSet.isSuperTagSetOf(other.getTagSet())) and \</font>
<font color="red"> 108.                (not matchConstraints or</font>
<font color="red"> 109.                 (self._subtypeSpec.isSuperTypeOf(other.getSubtypeSpec())))</font>
<font color="black"> 110. </font>
<font color="green"> 111.     @staticmethod</font>
<font color="black"> 112.     def isNoValue(*values):</font>
<font color="green"> 113.         for value in values:</font>
<font color="green"> 114.             if value is not None and value is not noValue:</font>
<font color="green"> 115.                 return False</font>
<font color="green"> 116.         return True</font>
<font color="black"> 117. </font>
<font color="black"> 118. </font>
<font color="green"> 119. class NoValue(object):</font>
<font color="black"> 120.     &quot;&quot;&quot;Create a singleton instance of NoValue class.</font>
<font color="black"> 121. </font>
<font color="black"> 122.     NoValue object can be used as an initializer on PyASN1 type class</font>
<font color="black"> 123.     instantiation to represent ASN.1 type rather than ASN.1 data value.</font>
<font color="black"> 124. </font>
<font color="black"> 125.     No operations other than type comparison can be performed on</font>
<font color="black"> 126.     a PyASN1 type object.</font>
<font color="green"> 127.     &quot;&quot;&quot;</font>
<font color="black"> 128.     skipMethods = ('__getattribute__', '__getattr__', '__setattr__', '__delattr__',</font>
<font color="black"> 129.                    '__class__', '__init__', '__del__', '__new__', '__repr__',</font>
<font color="green"> 130.                    '__qualname__', '__objclass__', 'im_class', '__sizeof__')</font>
<font color="black"> 131. </font>
<font color="green"> 132.     _instance = None</font>
<font color="black"> 133. </font>
<font color="green"> 134.     def __new__(cls):</font>
<font color="green"> 135.         if cls._instance is None:</font>
<font color="green"> 136.             def getPlug(name):</font>
<font color="green"> 137.                 def plug(self, *args, **kw):</font>
<font color="red"> 138.                     raise error.PyAsn1Error('Uninitialized ASN.1 value (&quot;%s&quot; attribute looked up)' % name)</font>
<font color="green"> 139.                 return plug</font>
<font color="black"> 140. </font>
<font color="green"> 141.             op_names = [name</font>
<font color="green"> 142.                         for typ in (str, int, list, dict)</font>
<font color="green"> 143.                         for name in dir(typ)</font>
<font color="green"> 144.                         if name not in cls.skipMethods and name.startswith('__') and name.endswith('__') and callable(getattr(typ, name))]</font>
<font color="black"> 145. </font>
<font color="green"> 146.             for name in set(op_names):</font>
<font color="green"> 147.                 setattr(cls, name, getPlug(name))</font>
<font color="black"> 148. </font>
<font color="green"> 149.             cls._instance = object.__new__(cls)</font>
<font color="black"> 150. </font>
<font color="green"> 151.         return cls._instance</font>
<font color="black"> 152. </font>
<font color="green"> 153.     def __getattr__(self, attr):</font>
<font color="red"> 154.         if attr in self.skipMethods:</font>
<font color="red"> 155.             raise AttributeError('attribute %s not present' % attr)</font>
<font color="red"> 156.         raise error.PyAsn1Error('No value for &quot;%s&quot;' % attr)</font>
<font color="black"> 157. </font>
<font color="green"> 158.     def __repr__(self):</font>
<font color="red"> 159.         return '%s()' % self.__class__.__name__</font>
<font color="black"> 160. </font>
<font color="green"> 161. noValue = NoValue()</font>
<font color="black"> 162. </font>
<font color="black"> 163. </font>
<font color="black"> 164. # Base class for &quot;simple&quot; ASN.1 objects. These are immutable.</font>
<font color="green"> 165. class AbstractSimpleAsn1Item(Asn1ItemBase):</font>
<font color="black"> 166.     #: Default payload value</font>
<font color="green"> 167.     defaultValue = noValue</font>
<font color="black"> 168. </font>
<font color="green"> 169.     def __init__(self, value=noValue, tagSet=None, subtypeSpec=None):</font>
<font color="green"> 170.         Asn1ItemBase.__init__(self, tagSet, subtypeSpec)</font>
<font color="green"> 171.         if self.isNoValue(value):</font>
<font color="green"> 172.             value = self.defaultValue</font>
<font color="green"> 173.         if self.isNoValue(value):</font>
<font color="green"> 174.             self.__hashedValue = value = noValue</font>
<font color="black"> 175.         else:</font>
<font color="green"> 176.             value = self.prettyIn(value)</font>
<font color="green"> 177.             self._verifySubtypeSpec(value)</font>
<font color="green"> 178.             self.__hashedValue = hash(value)</font>
<font color="green"> 179.         self._value = value</font>
<font color="green"> 180.         self._len = None</font>
<font color="black"> 181. </font>
<font color="green"> 182.     def __repr__(self):</font>
<font color="red"> 183.         r = []</font>
<font color="red"> 184.         if self._value is not self.defaultValue:</font>
<font color="red"> 185.             r.append(self.prettyOut(self._value))</font>
<font color="red"> 186.         if self._tagSet is not self.tagSet:</font>
<font color="red"> 187.             r.append('tagSet=%r' % (self._tagSet,))</font>
<font color="red"> 188.         if self._subtypeSpec is not self.subtypeSpec:</font>
<font color="red"> 189.             r.append('subtypeSpec=%r' % (self._subtypeSpec,))</font>
<font color="red"> 190.         return '%s(%s)' % (self.__class__.__name__, ', '.join(r))</font>
<font color="black"> 191. </font>
<font color="green"> 192.     def __str__(self):</font>
<font color="red"> 193.         return str(self._value)</font>
<font color="black"> 194. </font>
<font color="green"> 195.     def __eq__(self, other):</font>
<font color="red"> 196.         return self is other and True or self._value == other</font>
<font color="black"> 197. </font>
<font color="green"> 198.     def __ne__(self, other):</font>
<font color="red"> 199.         return self._value != other</font>
<font color="black"> 200. </font>
<font color="green"> 201.     def __lt__(self, other):</font>
<font color="red"> 202.         return self._value &lt; other</font>
<font color="black"> 203. </font>
<font color="green"> 204.     def __le__(self, other):</font>
<font color="red"> 205.         return self._value &lt;= other</font>
<font color="black"> 206. </font>
<font color="green"> 207.     def __gt__(self, other):</font>
<font color="red"> 208.         return self._value &gt; other</font>
<font color="black"> 209. </font>
<font color="green"> 210.     def __ge__(self, other):</font>
<font color="red"> 211.         return self._value &gt;= other</font>
<font color="black"> 212. </font>
<font color="green"> 213.     if sys.version_info[0] &lt;= 2:</font>
<font color="green"> 214.         def __nonzero__(self):</font>
<font color="red"> 215.             return bool(self._value)</font>
<font color="black"> 216.     else:</font>
<font color="red"> 217.         def __bool__(self):</font>
<font color="red"> 218.             return bool(self._value)</font>
<font color="black"> 219. </font>
<font color="green"> 220.     def __hash__(self):</font>
<font color="red"> 221.         return self.__hashedValue is noValue and hash(noValue) or self.__hashedValue</font>
<font color="black"> 222. </font>
<font color="green"> 223.     def hasValue(self):</font>
<font color="black"> 224.         &quot;&quot;&quot;Indicate if |ASN.1| object represents ASN.1 value or ASN.1 type.</font>
<font color="black"> 225. </font>
<font color="black"> 226.         The PyASN1 type objects can only participate in types comparison</font>
<font color="black"> 227.         and serve as a blueprint for serialization codecs to resolve</font>
<font color="black"> 228.         ambiguous types.</font>
<font color="black"> 229. </font>
<font color="black"> 230.         The PyASN1 value objects can additionally participate to most</font>
<font color="black"> 231.         of built-in Python operations.</font>
<font color="black"> 232. </font>
<font color="black"> 233.         Returns</font>
<font color="black"> 234.         -------</font>
<font color="black"> 235.         : :class:`bool`</font>
<font color="black"> 236.             :class:`True` if object is ASN.1 value,</font>
<font color="black"> 237.             :class:`False` otherwise.</font>
<font color="black"> 238. </font>
<font color="black"> 239.         &quot;&quot;&quot;</font>
<font color="red"> 240.         return self._value is not noValue</font>
<font color="black"> 241. </font>
<font color="green"> 242.     def clone(self, value=noValue, tagSet=None, subtypeSpec=None):</font>
<font color="black"> 243.         &quot;&quot;&quot;Create a copy of a |ASN.1| type or object.</font>
<font color="black"> 244. </font>
<font color="black"> 245.           Any parameters to the *clone()* method will replace corresponding</font>
<font color="black"> 246.           properties of the |ASN.1| object.</font>
<font color="black"> 247. </font>
<font color="black"> 248.           Parameters</font>
<font color="black"> 249.           ----------</font>
<font color="black"> 250.           value: :class:`tuple`, :class:`str` or |ASN.1| object</font>
<font color="black"> 251.               Initialization value to pass to new ASN.1 object instead of</font>
<font color="black"> 252.               inheriting one from the caller.</font>
<font color="black"> 253. </font>
<font color="black"> 254.           tagSet: :py:class:`~pyasn1.type.tag.TagSet`</font>
<font color="black"> 255.               Object representing ASN.1 tag(s) to use in new object instead of inheriting from the caller</font>
<font color="black"> 256. </font>
<font color="black"> 257.           subtypeSpec: :py:class:`~pyasn1.type.constraint.ConstraintsIntersection`</font>
<font color="black"> 258.               Object representing ASN.1 subtype constraint(s) to use in new object instead of inheriting from the caller</font>
<font color="black"> 259. </font>
<font color="black"> 260.           Returns</font>
<font color="black"> 261.           -------</font>
<font color="black"> 262.           :</font>
<font color="black"> 263.               new instance of |ASN.1| type/value</font>
<font color="black"> 264.         &quot;&quot;&quot;</font>
<font color="red"> 265.         if self.isNoValue(value):</font>
<font color="red"> 266.             if self.isNoValue(tagSet, subtypeSpec):</font>
<font color="red"> 267.                 return self</font>
<font color="red"> 268.             value = self._value</font>
<font color="red"> 269.         if tagSet is None:</font>
<font color="red"> 270.             tagSet = self._tagSet</font>
<font color="red"> 271.         if subtypeSpec is None:</font>
<font color="red"> 272.             subtypeSpec = self._subtypeSpec</font>
<font color="red"> 273.         return self.__class__(value, tagSet, subtypeSpec)</font>
<font color="black"> 274. </font>
<font color="green"> 275.     def subtype(self, value=noValue, implicitTag=None, explicitTag=None,</font>
<font color="green"> 276.                 subtypeSpec=None):</font>
<font color="black"> 277.         &quot;&quot;&quot;Create a copy of a |ASN.1| type or object.</font>
<font color="black"> 278. </font>
<font color="black"> 279.          Any parameters to the *subtype()* method will be added to the corresponding</font>
<font color="black"> 280.          properties of the |ASN.1| object.</font>
<font color="black"> 281. </font>
<font color="black"> 282.          Parameters</font>
<font color="black"> 283.          ----------</font>
<font color="black"> 284.          value: :class:`tuple`, :class:`str` or |ASN.1| object</font>
<font color="black"> 285.              Initialization value to pass to new ASN.1 object instead of</font>
<font color="black"> 286.              inheriting one from the caller.</font>
<font color="black"> 287. </font>
<font color="black"> 288.          implicitTag: :py:class:`~pyasn1.type.tag.Tag`</font>
<font color="black"> 289.              Implicitly apply given ASN.1 tag object to caller's</font>
<font color="black"> 290.              :py:class:`~pyasn1.type.tag.TagSet`, then use the result as</font>
<font color="black"> 291.              new object's ASN.1 tag(s).</font>
<font color="black"> 292. </font>
<font color="black"> 293.          explicitTag: :py:class:`~pyasn1.type.tag.Tag`</font>
<font color="black"> 294.              Explicitly apply given ASN.1 tag object to caller's</font>
<font color="black"> 295.              :py:class:`~pyasn1.type.tag.TagSet`, then use the result as</font>
<font color="black"> 296.              new object's ASN.1 tag(s).</font>
<font color="black"> 297. </font>
<font color="black"> 298.          subtypeSpec: :py:class:`~pyasn1.type.constraint.ConstraintsIntersection`</font>
<font color="black"> 299.              Add ASN.1 constraints object to one of the caller, then</font>
<font color="black"> 300.              use the result as new object's ASN.1 constraints.</font>
<font color="black"> 301. </font>
<font color="black"> 302.          Returns</font>
<font color="black"> 303.          -------</font>
<font color="black"> 304.          :</font>
<font color="black"> 305.              new instance of |ASN.1| type/value</font>
<font color="black"> 306.         &quot;&quot;&quot;</font>
<font color="green"> 307.         if self.isNoValue(value):</font>
<font color="green"> 308.             value = self._value</font>
<font color="green"> 309.         if implicitTag is not None:</font>
<font color="green"> 310.             tagSet = self._tagSet.tagImplicitly(implicitTag)</font>
<font color="red"> 311.         elif explicitTag is not None:</font>
<font color="red"> 312.             tagSet = self._tagSet.tagExplicitly(explicitTag)</font>
<font color="black"> 313.         else:</font>
<font color="red"> 314.             tagSet = self._tagSet</font>
<font color="green"> 315.         if subtypeSpec is None:</font>
<font color="green"> 316.             subtypeSpec = self._subtypeSpec</font>
<font color="black"> 317.         else:</font>
<font color="red"> 318.             subtypeSpec = self._subtypeSpec + subtypeSpec</font>
<font color="green"> 319.         return self.__class__(value, tagSet, subtypeSpec)</font>
<font color="black"> 320. </font>
<font color="green"> 321.     def prettyIn(self, value):</font>
<font color="green"> 322.         return value</font>
<font color="black"> 323. </font>
<font color="green"> 324.     def prettyOut(self, value):</font>
<font color="red"> 325.         return str(value)</font>
<font color="black"> 326. </font>
<font color="green"> 327.     def prettyPrint(self, scope=0):</font>
<font color="black"> 328.         &quot;&quot;&quot;Provide human-friendly printable object representation.</font>
<font color="black"> 329. </font>
<font color="black"> 330.         Returns</font>
<font color="black"> 331.         -------</font>
<font color="black"> 332.         : :class:`str`</font>
<font color="black"> 333.             human-friendly type and/or value representation.</font>
<font color="black"> 334.         &quot;&quot;&quot;</font>
<font color="red"> 335.         if self.hasValue():</font>
<font color="red"> 336.             return self.prettyOut(self._value)</font>
<font color="black"> 337.         else:</font>
<font color="red"> 338.             return '&lt;no value&gt;'</font>
<font color="black"> 339. </font>
<font color="black"> 340.     # XXX Compatibility stub</font>
<font color="green"> 341.     def prettyPrinter(self, scope=0):</font>
<font color="red"> 342.         return self.prettyPrint(scope)</font>
<font color="black"> 343. </font>
<font color="black"> 344.     # noinspection PyUnusedLocal</font>
<font color="green"> 345.     def prettyPrintType(self, scope=0):</font>
<font color="red"> 346.         return '%s -&gt; %s' % (self.getTagSet(), self.__class__.__name__)</font>
<font color="black"> 347. </font>
<font color="black"> 348. </font>
<font color="black"> 349. #</font>
<font color="black"> 350. # Constructed types:</font>
<font color="black"> 351. # * There are five of them: Sequence, SequenceOf/SetOf, Set and Choice</font>
<font color="black"> 352. # * ASN1 types and values are represened by Python class instances</font>
<font color="black"> 353. # * Value initialization is made for defaulted components only</font>
<font color="black"> 354. # * Primary method of component addressing is by-position. Data model for base</font>
<font color="black"> 355. #   type is Python sequence. Additional type-specific addressing methods</font>
<font color="black"> 356. #   may be implemented for particular types.</font>
<font color="black"> 357. # * SequenceOf and SetOf types do not implement any additional methods</font>
<font color="black"> 358. # * Sequence, Set and Choice types also implement by-identifier addressing</font>
<font color="black"> 359. # * Sequence, Set and Choice types also implement by-asn1-type (tag) addressing</font>
<font color="black"> 360. # * Sequence and Set types may include optional and defaulted</font>
<font color="black"> 361. #   components</font>
<font color="black"> 362. # * Constructed types hold a reference to component types used for value</font>
<font color="black"> 363. #   verification and ordering.</font>
<font color="black"> 364. # * Component type is a scalar type for SequenceOf/SetOf types and a list</font>
<font color="black"> 365. #   of types for Sequence/Set/Choice.</font>
<font color="black"> 366. #</font>
<font color="black"> 367. </font>
<font color="green"> 368. def setupComponent():</font>
<font color="black"> 369.     &quot;&quot;&quot;Returns a sentinel value.</font>
<font color="black"> 370. </font>
<font color="black"> 371.      Indicates to a constructed type to set up its inner component so that it</font>
<font color="black"> 372.      can be referred to. This is useful in situation when you want to populate</font>
<font color="black"> 373.      descendants of a constructed type what requires being able to refer to</font>
<font color="black"> 374.      their parent types along the way.</font>
<font color="black"> 375. </font>
<font color="black"> 376.      Example</font>
<font color="black"> 377.      -------</font>
<font color="black"> 378. </font>
<font color="black"> 379.      &gt;&gt;&gt; constructed['record'] = setupComponent()</font>
<font color="black"> 380.      &gt;&gt;&gt; constructed['record']['scalar'] = 42</font>
<font color="black"> 381.     &quot;&quot;&quot;</font>
<font color="red"> 382.     return noValue</font>
<font color="black"> 383. </font>
<font color="black"> 384. </font>
<font color="green"> 385. class AbstractConstructedAsn1Item(Asn1ItemBase):</font>
<font color="black"> 386. </font>
<font color="black"> 387.     #: If `True`, requires exact component type matching,</font>
<font color="black"> 388.     #: otherwise subtype relation is only enforced</font>
<font color="green"> 389.     strictConstraints = False</font>
<font color="black"> 390. </font>
<font color="green"> 391.     def __init__(self, componentType=None, tagSet=None,</font>
<font color="green"> 392.                  subtypeSpec=None, sizeSpec=None):</font>
<font color="green"> 393.         Asn1ItemBase.__init__(self, tagSet, subtypeSpec)</font>
<font color="green"> 394.         if componentType is None:</font>
<font color="green"> 395.             self._componentType = self.componentType</font>
<font color="black"> 396.         else:</font>
<font color="green"> 397.             self._componentType = componentType</font>
<font color="green"> 398.         if sizeSpec is None:</font>
<font color="green"> 399.             self._sizeSpec = self.sizeSpec</font>
<font color="black"> 400.         else:</font>
<font color="green"> 401.             self._sizeSpec = sizeSpec</font>
<font color="green"> 402.         self._componentValues = []</font>
<font color="green"> 403.         self._componentValuesSet = 0</font>
<font color="black"> 404. </font>
<font color="green"> 405.     def __repr__(self):</font>
<font color="red"> 406.         r = []</font>
<font color="red"> 407.         if self._componentType is not self.componentType:</font>
<font color="red"> 408.             r.append('componentType=%r' % (self._componentType,))</font>
<font color="red"> 409.         if self._tagSet is not self.tagSet:</font>
<font color="red"> 410.             r.append('tagSet=%r' % (self._tagSet,))</font>
<font color="red"> 411.         if self._subtypeSpec is not self.subtypeSpec:</font>
<font color="red"> 412.             r.append('subtypeSpec=%r' % (self._subtypeSpec,))</font>
<font color="red"> 413.         r = '%s(%s)' % (self.__class__.__name__, ', '.join(r))</font>
<font color="red"> 414.         if self._componentValues:</font>
<font color="red"> 415.             r += '.setComponents(%s)' % ', '.join([repr(x) for x in self._componentValues])</font>
<font color="red"> 416.         return r</font>
<font color="black"> 417. </font>
<font color="green"> 418.     def __eq__(self, other):</font>
<font color="red"> 419.         return self is other and True or self._componentValues == other</font>
<font color="black"> 420. </font>
<font color="green"> 421.     def __ne__(self, other):</font>
<font color="red"> 422.         return self._componentValues != other</font>
<font color="black"> 423. </font>
<font color="green"> 424.     def __lt__(self, other):</font>
<font color="red"> 425.         return self._componentValues &lt; other</font>
<font color="black"> 426. </font>
<font color="green"> 427.     def __le__(self, other):</font>
<font color="red"> 428.         return self._componentValues &lt;= other</font>
<font color="black"> 429. </font>
<font color="green"> 430.     def __gt__(self, other):</font>
<font color="red"> 431.         return self._componentValues &gt; other</font>
<font color="black"> 432. </font>
<font color="green"> 433.     def __ge__(self, other):</font>
<font color="red"> 434.         return self._componentValues &gt;= other</font>
<font color="black"> 435. </font>
<font color="green"> 436.     if sys.version_info[0] &lt;= 2:</font>
<font color="green"> 437.         def __nonzero__(self):</font>
<font color="red"> 438.             return bool(self._componentValues)</font>
<font color="black"> 439.     else:</font>
<font color="red"> 440.         def __bool__(self):</font>
<font color="red"> 441.             return bool(self._componentValues)</font>
<font color="black"> 442. </font>
<font color="green"> 443.     def getComponentTagMap(self):</font>
<font color="red"> 444.         raise error.PyAsn1Error('Method not implemented')</font>
<font color="black"> 445. </font>
<font color="green"> 446.     def _cloneComponentValues(self, myClone, cloneValueFlag):</font>
<font color="red"> 447.         pass</font>
<font color="black"> 448. </font>
<font color="green"> 449.     def clone(self, tagSet=None, subtypeSpec=None, sizeSpec=None, cloneValueFlag=None):</font>
<font color="black"> 450.         &quot;&quot;&quot;Create a copy of a |ASN.1| type or object.</font>
<font color="black"> 451. </font>
<font color="black"> 452.         Any parameters to the *clone()* method will replace corresponding</font>
<font color="black"> 453.         properties of the |ASN.1| object.</font>
<font color="black"> 454. </font>
<font color="black"> 455.         Parameters</font>
<font color="black"> 456.         ----------</font>
<font color="black"> 457.         tagSet: :py:class:`~pyasn1.type.tag.TagSet`</font>
<font color="black"> 458.             Object representing non-default ASN.1 tag(s)</font>
<font color="black"> 459. </font>
<font color="black"> 460.         subtypeSpec: :py:class:`~pyasn1.type.constraint.ConstraintsIntersection`</font>
<font color="black"> 461.             Object representing non-default ASN.1 subtype constraint(s)</font>
<font color="black"> 462. </font>
<font color="black"> 463.         sizeSpec: :py:class:`~pyasn1.type.constraint.ConstraintsIntersection`</font>
<font color="black"> 464.             Object representing non-default ASN.1 size constraint(s)</font>
<font color="black"> 465. </font>
<font color="black"> 466.         Returns</font>
<font color="black"> 467.         -------</font>
<font color="black"> 468.         :</font>
<font color="black"> 469.             new instance of |ASN.1| type/value</font>
<font color="black"> 470. </font>
<font color="black"> 471.         &quot;&quot;&quot;</font>
<font color="red"> 472.         if tagSet is None:</font>
<font color="red"> 473.             tagSet = self._tagSet</font>
<font color="red"> 474.         if subtypeSpec is None:</font>
<font color="red"> 475.             subtypeSpec = self._subtypeSpec</font>
<font color="red"> 476.         if sizeSpec is None:</font>
<font color="red"> 477.             sizeSpec = self._sizeSpec</font>
<font color="red"> 478.         r = self.__class__(self._componentType, tagSet, subtypeSpec, sizeSpec)</font>
<font color="red"> 479.         if cloneValueFlag:</font>
<font color="red"> 480.             self._cloneComponentValues(r, cloneValueFlag)</font>
<font color="red"> 481.         return r</font>
<font color="black"> 482. </font>
<font color="green"> 483.     def subtype(self, implicitTag=None, explicitTag=None, subtypeSpec=None,</font>
<font color="green"> 484.                 sizeSpec=None, cloneValueFlag=None):</font>
<font color="black"> 485.         &quot;&quot;&quot;Create a copy of a |ASN.1| type or object.</font>
<font color="black"> 486. </font>
<font color="black"> 487.         Any parameters to the *subtype()* method will be added to the corresponding</font>
<font color="black"> 488.         properties of the |ASN.1| object.</font>
<font color="black"> 489. </font>
<font color="black"> 490.         Parameters</font>
<font color="black"> 491.         ----------</font>
<font color="black"> 492.         tagSet: :py:class:`~pyasn1.type.tag.TagSet`</font>
<font color="black"> 493.             Object representing non-default ASN.1 tag(s)</font>
<font color="black"> 494. </font>
<font color="black"> 495.         subtypeSpec: :py:class:`~pyasn1.type.constraint.ConstraintsIntersection`</font>
<font color="black"> 496.             Object representing non-default ASN.1 subtype constraint(s)</font>
<font color="black"> 497. </font>
<font color="black"> 498.         sizeSpec: :py:class:`~pyasn1.type.constraint.ConstraintsIntersection`</font>
<font color="black"> 499.             Object representing non-default ASN.1 size constraint(s)</font>
<font color="black"> 500. </font>
<font color="black"> 501.         Returns</font>
<font color="black"> 502.         -------</font>
<font color="black"> 503.         :</font>
<font color="black"> 504.             new instance of |ASN.1| type/value</font>
<font color="black"> 505. </font>
<font color="black"> 506.         &quot;&quot;&quot;</font>
<font color="green"> 507.         if implicitTag is not None:</font>
<font color="green"> 508.             tagSet = self._tagSet.tagImplicitly(implicitTag)</font>
<font color="red"> 509.         elif explicitTag is not None:</font>
<font color="red"> 510.             tagSet = self._tagSet.tagExplicitly(explicitTag)</font>
<font color="black"> 511.         else:</font>
<font color="red"> 512.             tagSet = self._tagSet</font>
<font color="green"> 513.         if subtypeSpec is None:</font>
<font color="green"> 514.             subtypeSpec = self._subtypeSpec</font>
<font color="black"> 515.         else:</font>
<font color="red"> 516.             subtypeSpec = self._subtypeSpec + subtypeSpec</font>
<font color="green"> 517.         if sizeSpec is None:</font>
<font color="green"> 518.             sizeSpec = self._sizeSpec</font>
<font color="black"> 519.         else:</font>
<font color="red"> 520.             sizeSpec = sizeSpec + self._sizeSpec</font>
<font color="green"> 521.         r = self.__class__(self._componentType, tagSet, subtypeSpec, sizeSpec)</font>
<font color="green"> 522.         if cloneValueFlag:</font>
<font color="red"> 523.             self._cloneComponentValues(r, cloneValueFlag)</font>
<font color="green"> 524.         return r</font>
<font color="black"> 525. </font>
<font color="green"> 526.     def _verifyComponent(self, idx, value):</font>
<font color="red"> 527.         pass</font>
<font color="black"> 528. </font>
<font color="green"> 529.     def verifySizeSpec(self):</font>
<font color="red"> 530.         self._sizeSpec(self)</font>
<font color="black"> 531. </font>
<font color="green"> 532.     def getComponentByPosition(self, idx):</font>
<font color="red"> 533.         raise error.PyAsn1Error('Method not implemented')</font>
<font color="black"> 534. </font>
<font color="green"> 535.     def setComponentByPosition(self, idx, value, verifyConstraints=True):</font>
<font color="red"> 536.         raise error.PyAsn1Error('Method not implemented')</font>
<font color="black"> 537. </font>
<font color="green"> 538.     def setComponents(self, *args, **kwargs):</font>
<font color="red"> 539.         for idx, value in enumerate(args):</font>
<font color="red"> 540.             self[idx] = value</font>
<font color="red"> 541.         for k in kwargs:</font>
<font color="red"> 542.             self[k] = kwargs[k]</font>
<font color="red"> 543.         return self</font>
<font color="black"> 544. </font>
<font color="green"> 545.     def getComponentType(self):</font>
<font color="red"> 546.         return self._componentType</font>
<font color="black"> 547. </font>
<font color="green"> 548.     def setDefaultComponents(self):</font>
<font color="red"> 549.         pass</font>
<font color="black"> 550. </font>
<font color="green"> 551.     def __getitem__(self, idx):</font>
<font color="red"> 552.         return self.getComponentByPosition(idx)</font>
<font color="black"> 553. </font>
<font color="green"> 554.     def __setitem__(self, idx, value):</font>
<font color="red"> 555.         self.setComponentByPosition(idx, value)</font>
<font color="black"> 556. </font>
<font color="green"> 557.     def __len__(self):</font>
<font color="red"> 558.         return len(self._componentValues)</font>
<font color="black"> 559. </font>
<font color="green"> 560.     def clear(self):</font>
<font color="red"> 561.         self._componentValues = []</font>
<font color="red"> 562.         self._componentValuesSet = 0</font>
</pre>

