source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/s3transfer/delete.py</b><br>


file stats: <b>19 lines, 7 executed: 36.8% covered</b>
<pre>
<font color="black">   1. # Copyright 2016 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. from s3transfer.tasks import Task</font>
<font color="green">  14. from s3transfer.tasks import SubmissionTask</font>
<font color="black">  15. </font>
<font color="black">  16. </font>
<font color="green">  17. class DeleteSubmissionTask(SubmissionTask):</font>
<font color="green">  18.     &quot;&quot;&quot;Task for submitting tasks to execute an object deletion.&quot;&quot;&quot;</font>
<font color="black">  19. </font>
<font color="green">  20.     def _submit(self, client, request_executor, transfer_future, **kwargs):</font>
<font color="black">  21.         &quot;&quot;&quot;</font>
<font color="black">  22.         :param client: The client associated with the transfer manager</font>
<font color="black">  23. </font>
<font color="black">  24.         :type config: s3transfer.manager.TransferConfig</font>
<font color="black">  25.         :param config: The transfer config associated with the transfer</font>
<font color="black">  26.             manager</font>
<font color="black">  27. </font>
<font color="black">  28.         :type osutil: s3transfer.utils.OSUtil</font>
<font color="black">  29.         :param osutil: The os utility associated to the transfer manager</font>
<font color="black">  30. </font>
<font color="black">  31.         :type request_executor: s3transfer.futures.BoundedExecutor</font>
<font color="black">  32.         :param request_executor: The request executor associated with the</font>
<font color="black">  33.             transfer manager</font>
<font color="black">  34. </font>
<font color="black">  35.         :type transfer_future: s3transfer.futures.TransferFuture</font>
<font color="black">  36.         :param transfer_future: The transfer future associated with the</font>
<font color="black">  37.             transfer request that tasks are being submitted for</font>
<font color="black">  38.         &quot;&quot;&quot;</font>
<font color="red">  39.         call_args = transfer_future.meta.call_args</font>
<font color="black">  40. </font>
<font color="red">  41.         self._transfer_coordinator.submit(</font>
<font color="red">  42.             request_executor,</font>
<font color="red">  43.             DeleteObjectTask(</font>
<font color="red">  44.                 transfer_coordinator=self._transfer_coordinator,</font>
<font color="red">  45.                 main_kwargs={</font>
<font color="red">  46.                     'client': client,</font>
<font color="red">  47.                     'bucket': call_args.bucket,</font>
<font color="red">  48.                     'key': call_args.key,</font>
<font color="red">  49.                     'extra_args': call_args.extra_args,</font>
<font color="black">  50.                 },</font>
<font color="red">  51.                 is_final=True</font>
<font color="black">  52.             )</font>
<font color="black">  53.         )</font>
<font color="black">  54. </font>
<font color="black">  55. </font>
<font color="green">  56. class DeleteObjectTask(Task):</font>
<font color="green">  57.     def _main(self, client, bucket, key, extra_args):</font>
<font color="black">  58.         &quot;&quot;&quot;</font>
<font color="black">  59. </font>
<font color="black">  60.         :param client: The S3 client to use when calling DeleteObject</font>
<font color="black">  61. </font>
<font color="black">  62.         :type bucket: str</font>
<font color="black">  63.         :param bucket: The name of the bucket.</font>
<font color="black">  64. </font>
<font color="black">  65.         :type key: str</font>
<font color="black">  66.         :param key: The name of the object to delete.</font>
<font color="black">  67. </font>
<font color="black">  68.         :type extra_args: dict</font>
<font color="black">  69.         :param extra_args: Extra arguments to pass to the DeleteObject call.</font>
<font color="black">  70. </font>
<font color="black">  71.         &quot;&quot;&quot;</font>
<font color="red">  72.         client.delete_object(Bucket=bucket, Key=key, **extra_args)</font>
</pre>

