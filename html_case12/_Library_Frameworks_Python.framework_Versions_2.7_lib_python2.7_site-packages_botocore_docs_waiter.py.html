source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/botocore/docs/waiter.py</b><br>


file stats: <b>65 lines, 10 executed: 15.4% covered</b>
<pre>
<font color="black">   1. # Copyright 2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. from botocore import xform_name</font>
<font color="green">  14. from botocore.compat import OrderedDict</font>
<font color="green">  15. from botocore.docs.utils import DocumentedShape</font>
<font color="green">  16. from botocore.utils import get_service_module_name</font>
<font color="green">  17. from botocore.docs.method import document_model_driven_method</font>
<font color="black">  18. </font>
<font color="black">  19. </font>
<font color="green">  20. class WaiterDocumenter(object):</font>
<font color="green">  21.     def __init__(self, client, service_waiter_model):</font>
<font color="red">  22.         self._client = client</font>
<font color="red">  23.         self._service_name = self._client.meta.service_model.service_name</font>
<font color="red">  24.         self._service_waiter_model = service_waiter_model</font>
<font color="black">  25. </font>
<font color="green">  26.     def document_waiters(self, section):</font>
<font color="black">  27.         &quot;&quot;&quot;Documents the various waiters for a service.</font>
<font color="black">  28. </font>
<font color="black">  29.         :param section: The section to write to.</font>
<font color="black">  30.         &quot;&quot;&quot;</font>
<font color="red">  31.         section.style.h2('Waiters')</font>
<font color="red">  32.         section.style.new_line()</font>
<font color="red">  33.         section.writeln('The available waiters are:')</font>
<font color="red">  34.         for waiter_name in self._service_waiter_model.waiter_names:</font>
<font color="red">  35.             section.style.li(</font>
<font color="red">  36.                 ':py:class:`%s.Waiter.%s`' % (</font>
<font color="red">  37.                     self._client.__class__.__name__, waiter_name))</font>
<font color="red">  38.             self._add_single_waiter(section, waiter_name)</font>
<font color="black">  39. </font>
<font color="green">  40.     def _add_single_waiter(self, section, waiter_name):</font>
<font color="red">  41.         section = section.add_new_section(waiter_name)</font>
<font color="red">  42.         section.style.start_sphinx_py_class(</font>
<font color="red">  43.             class_name='%s.Waiter.%s' % (</font>
<font color="red">  44.                 self._client.__class__.__name__, waiter_name))</font>
<font color="black">  45. </font>
<font color="black">  46.         # Add example on how to instantiate waiter.</font>
<font color="red">  47.         section.style.start_codeblock()</font>
<font color="red">  48.         section.style.new_line()</font>
<font color="red">  49.         section.write(</font>
<font color="red">  50.             'waiter = client.get_waiter(\'%s\')' % xform_name(waiter_name)</font>
<font color="black">  51.         )</font>
<font color="red">  52.         section.style.end_codeblock()</font>
<font color="black">  53. </font>
<font color="black">  54.         # Add information on the wait() method</font>
<font color="red">  55.         section.style.new_line()</font>
<font color="red">  56.         document_wait_method(</font>
<font color="red">  57.             section=section,</font>
<font color="red">  58.             waiter_name=waiter_name,</font>
<font color="red">  59.             event_emitter=self._client.meta.events,</font>
<font color="red">  60.             service_model=self._client.meta.service_model,</font>
<font color="red">  61.             service_waiter_model=self._service_waiter_model</font>
<font color="black">  62.         )</font>
<font color="black">  63. </font>
<font color="black">  64. </font>
<font color="black">  65. def document_wait_method(section, waiter_name, event_emitter,</font>
<font color="black">  66.                          service_model, service_waiter_model,</font>
<font color="green">  67.                          include_signature=True):</font>
<font color="black">  68.     &quot;&quot;&quot;Documents a the wait method of a waiter</font>
<font color="black">  69. </font>
<font color="black">  70.     :param section: The section to write to</font>
<font color="black">  71. </font>
<font color="black">  72.     :param waiter_name: The name of the waiter</font>
<font color="black">  73. </font>
<font color="black">  74.     :param event_emitter: The event emitter to use to emit events</font>
<font color="black">  75. </font>
<font color="black">  76.     :param service_model: The service model</font>
<font color="black">  77. </font>
<font color="black">  78.     :param service_waiter_model: The waiter model associated to the service</font>
<font color="black">  79. </font>
<font color="black">  80.     :param include_signature: Whether or not to include the signature.</font>
<font color="black">  81.         It is useful for generating docstrings.</font>
<font color="black">  82.     &quot;&quot;&quot;</font>
<font color="red">  83.     waiter_model = service_waiter_model.get_waiter(waiter_name)</font>
<font color="red">  84.     operation_model = service_model.operation_model(</font>
<font color="red">  85.         waiter_model.operation)</font>
<font color="black">  86. </font>
<font color="red">  87.     waiter_config_members = OrderedDict()</font>
<font color="black">  88. </font>
<font color="red">  89.     waiter_config_members['Delay'] = DocumentedShape(</font>
<font color="red">  90.         name='Delay', type_name='integer',</font>
<font color="black">  91.         documentation=(</font>
<font color="red">  92.             '&lt;p&gt;The amount of time in seconds to wait between '</font>
<font color="red">  93.             'attempts. Default: {0}&lt;/p&gt;'.format(waiter_model.delay)))</font>
<font color="black">  94. </font>
<font color="red">  95.     waiter_config_members['MaxAttempts'] = DocumentedShape(</font>
<font color="red">  96.         name='MaxAttempts', type_name='integer',</font>
<font color="black">  97.         documentation=(</font>
<font color="red">  98.             '&lt;p&gt;The maximum number of attempts to be made. '</font>
<font color="red">  99.             'Default: {0}&lt;/p&gt;'.format(waiter_model.max_attempts)))</font>
<font color="black"> 100. </font>
<font color="black"> 101.     botocore_waiter_params = [</font>
<font color="red"> 102.         DocumentedShape(</font>
<font color="red"> 103.             name='WaiterConfig', type_name='structure',</font>
<font color="black"> 104.             documentation=(</font>
<font color="red"> 105.                 '&lt;p&gt;A dictionary that provides parameters to control '</font>
<font color="black"> 106.                 'waiting behavior.&lt;/p&gt;'),</font>
<font color="red"> 107.             members=waiter_config_members)</font>
<font color="black"> 108.     ]</font>
<font color="black"> 109. </font>
<font color="black"> 110.     wait_description = (</font>
<font color="red"> 111.         'Polls :py:meth:`{0}.Client.{1}` every {2} '</font>
<font color="black"> 112.         'seconds until a successful state is reached. An error is '</font>
<font color="black"> 113.         'returned after {3} failed checks.'.format(</font>
<font color="red"> 114.             get_service_module_name(service_model),</font>
<font color="red"> 115.             xform_name(waiter_model.operation),</font>
<font color="red"> 116.             waiter_model.delay, waiter_model.max_attempts)</font>
<font color="black"> 117.     )</font>
<font color="black"> 118. </font>
<font color="red"> 119.     document_model_driven_method(</font>
<font color="red"> 120.         section, 'wait', operation_model,</font>
<font color="red"> 121.         event_emitter=event_emitter,</font>
<font color="red"> 122.         method_description=wait_description,</font>
<font color="red"> 123.         example_prefix='waiter.wait',</font>
<font color="red"> 124.         include_input=botocore_waiter_params,</font>
<font color="red"> 125.         document_output=False,</font>
<font color="red"> 126.         include_signature=include_signature</font>
<font color="black"> 127.     )</font>
</pre>

