source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/botocore/vendored/requests/packages/urllib3/packages/six.py</b><br>


file stats: <b>263 lines, 149 executed: 56.7% covered</b>
<pre>
<font color="green">   1. &quot;&quot;&quot;Utilities for writing code that runs on Python 2 and 3&quot;&quot;&quot;</font>
<font color="black">   2. </font>
<font color="black">   3. #Copyright (c) 2010-2011 Benjamin Peterson</font>
<font color="black">   4. </font>
<font color="black">   5. #Permission is hereby granted, free of charge, to any person obtaining a copy of</font>
<font color="black">   6. #this software and associated documentation files (the &quot;Software&quot;), to deal in</font>
<font color="black">   7. #the Software without restriction, including without limitation the rights to</font>
<font color="black">   8. #use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of</font>
<font color="black">   9. #the Software, and to permit persons to whom the Software is furnished to do so,</font>
<font color="black">  10. #subject to the following conditions:</font>
<font color="black">  11. </font>
<font color="black">  12. #The above copyright notice and this permission notice shall be included in all</font>
<font color="black">  13. #copies or substantial portions of the Software.</font>
<font color="black">  14. </font>
<font color="black">  15. #THE SOFTWARE IS PROVIDED &quot;AS IS&quot;, WITHOUT WARRANTY OF ANY KIND, EXPRESS OR</font>
<font color="black">  16. #IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS</font>
<font color="black">  17. #FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR</font>
<font color="black">  18. #COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER</font>
<font color="black">  19. #IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN</font>
<font color="black">  20. #CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.</font>
<font color="black">  21. </font>
<font color="green">  22. import operator</font>
<font color="green">  23. import sys</font>
<font color="green">  24. import types</font>
<font color="black">  25. </font>
<font color="green">  26. __author__ = &quot;Benjamin Peterson &lt;benjamin@python.org&gt;&quot;</font>
<font color="green">  27. __version__ = &quot;1.2.0&quot;  # Revision 41c74fef2ded</font>
<font color="black">  28. </font>
<font color="black">  29. </font>
<font color="black">  30. # True if we are running on Python 3.</font>
<font color="green">  31. PY3 = sys.version_info[0] == 3</font>
<font color="black">  32. </font>
<font color="green">  33. if PY3:</font>
<font color="red">  34.     string_types = str,</font>
<font color="red">  35.     integer_types = int,</font>
<font color="red">  36.     class_types = type,</font>
<font color="red">  37.     text_type = str</font>
<font color="red">  38.     binary_type = bytes</font>
<font color="black">  39. </font>
<font color="red">  40.     MAXSIZE = sys.maxsize</font>
<font color="black">  41. else:</font>
<font color="green">  42.     string_types = basestring,</font>
<font color="green">  43.     integer_types = (int, long)</font>
<font color="green">  44.     class_types = (type, types.ClassType)</font>
<font color="green">  45.     text_type = unicode</font>
<font color="green">  46.     binary_type = str</font>
<font color="black">  47. </font>
<font color="green">  48.     if sys.platform.startswith(&quot;java&quot;):</font>
<font color="black">  49.         # Jython always uses 32 bits.</font>
<font color="red">  50.         MAXSIZE = int((1 &lt;&lt; 31) - 1)</font>
<font color="black">  51.     else:</font>
<font color="black">  52.         # It's possible to have sizeof(long) != sizeof(Py_ssize_t).</font>
<font color="green">  53.         class X(object):</font>
<font color="green">  54.             def __len__(self):</font>
<font color="green">  55.                 return 1 &lt;&lt; 31</font>
<font color="green">  56.         try:</font>
<font color="green">  57.             len(X())</font>
<font color="red">  58.         except OverflowError:</font>
<font color="black">  59.             # 32-bit</font>
<font color="red">  60.             MAXSIZE = int((1 &lt;&lt; 31) - 1)</font>
<font color="black">  61.         else:</font>
<font color="black">  62.             # 64-bit</font>
<font color="green">  63.             MAXSIZE = int((1 &lt;&lt; 63) - 1)</font>
<font color="green">  64.             del X</font>
<font color="black">  65. </font>
<font color="black">  66. </font>
<font color="green">  67. def _add_doc(func, doc):</font>
<font color="black">  68.     &quot;&quot;&quot;Add documentation to a function.&quot;&quot;&quot;</font>
<font color="green">  69.     func.__doc__ = doc</font>
<font color="black">  70. </font>
<font color="black">  71. </font>
<font color="green">  72. def _import_module(name):</font>
<font color="black">  73.     &quot;&quot;&quot;Import module, returning the module after the last dot.&quot;&quot;&quot;</font>
<font color="green">  74.     __import__(name)</font>
<font color="green">  75.     return sys.modules[name]</font>
<font color="black">  76. </font>
<font color="black">  77. </font>
<font color="green">  78. class _LazyDescr(object):</font>
<font color="black">  79. </font>
<font color="green">  80.     def __init__(self, name):</font>
<font color="green">  81.         self.name = name</font>
<font color="black">  82. </font>
<font color="green">  83.     def __get__(self, obj, tp):</font>
<font color="green">  84.         result = self._resolve()</font>
<font color="green">  85.         setattr(obj, self.name, result)</font>
<font color="black">  86.         # This is a bit ugly, but it avoids running this again.</font>
<font color="green">  87.         delattr(tp, self.name)</font>
<font color="green">  88.         return result</font>
<font color="black">  89. </font>
<font color="black">  90. </font>
<font color="green">  91. class MovedModule(_LazyDescr):</font>
<font color="black">  92. </font>
<font color="green">  93.     def __init__(self, name, old, new=None):</font>
<font color="green">  94.         super(MovedModule, self).__init__(name)</font>
<font color="green">  95.         if PY3:</font>
<font color="red">  96.             if new is None:</font>
<font color="red">  97.                 new = name</font>
<font color="red">  98.             self.mod = new</font>
<font color="black">  99.         else:</font>
<font color="green"> 100.             self.mod = old</font>
<font color="black"> 101. </font>
<font color="green"> 102.     def _resolve(self):</font>
<font color="red"> 103.         return _import_module(self.mod)</font>
<font color="black"> 104. </font>
<font color="black"> 105. </font>
<font color="green"> 106. class MovedAttribute(_LazyDescr):</font>
<font color="black"> 107. </font>
<font color="green"> 108.     def __init__(self, name, old_mod, new_mod, old_attr=None, new_attr=None):</font>
<font color="green"> 109.         super(MovedAttribute, self).__init__(name)</font>
<font color="green"> 110.         if PY3:</font>
<font color="red"> 111.             if new_mod is None:</font>
<font color="red"> 112.                 new_mod = name</font>
<font color="red"> 113.             self.mod = new_mod</font>
<font color="red"> 114.             if new_attr is None:</font>
<font color="red"> 115.                 if old_attr is None:</font>
<font color="red"> 116.                     new_attr = name</font>
<font color="black"> 117.                 else:</font>
<font color="red"> 118.                     new_attr = old_attr</font>
<font color="red"> 119.             self.attr = new_attr</font>
<font color="black"> 120.         else:</font>
<font color="green"> 121.             self.mod = old_mod</font>
<font color="green"> 122.             if old_attr is None:</font>
<font color="green"> 123.                 old_attr = name</font>
<font color="green"> 124.             self.attr = old_attr</font>
<font color="black"> 125. </font>
<font color="green"> 126.     def _resolve(self):</font>
<font color="green"> 127.         module = _import_module(self.mod)</font>
<font color="green"> 128.         return getattr(module, self.attr)</font>
<font color="black"> 129. </font>
<font color="black"> 130. </font>
<font color="black"> 131. </font>
<font color="green"> 132. class _MovedItems(types.ModuleType):</font>
<font color="green"> 133.     &quot;&quot;&quot;Lazy loading of moved objects&quot;&quot;&quot;</font>
<font color="black"> 134. </font>
<font color="black"> 135. </font>
<font color="black"> 136. _moved_attributes = [</font>
<font color="green"> 137.     MovedAttribute(&quot;cStringIO&quot;, &quot;cStringIO&quot;, &quot;io&quot;, &quot;StringIO&quot;),</font>
<font color="green"> 138.     MovedAttribute(&quot;filter&quot;, &quot;itertools&quot;, &quot;builtins&quot;, &quot;ifilter&quot;, &quot;filter&quot;),</font>
<font color="green"> 139.     MovedAttribute(&quot;input&quot;, &quot;__builtin__&quot;, &quot;builtins&quot;, &quot;raw_input&quot;, &quot;input&quot;),</font>
<font color="green"> 140.     MovedAttribute(&quot;map&quot;, &quot;itertools&quot;, &quot;builtins&quot;, &quot;imap&quot;, &quot;map&quot;),</font>
<font color="green"> 141.     MovedAttribute(&quot;reload_module&quot;, &quot;__builtin__&quot;, &quot;imp&quot;, &quot;reload&quot;),</font>
<font color="green"> 142.     MovedAttribute(&quot;reduce&quot;, &quot;__builtin__&quot;, &quot;functools&quot;),</font>
<font color="green"> 143.     MovedAttribute(&quot;StringIO&quot;, &quot;StringIO&quot;, &quot;io&quot;),</font>
<font color="green"> 144.     MovedAttribute(&quot;xrange&quot;, &quot;__builtin__&quot;, &quot;builtins&quot;, &quot;xrange&quot;, &quot;range&quot;),</font>
<font color="green"> 145.     MovedAttribute(&quot;zip&quot;, &quot;itertools&quot;, &quot;builtins&quot;, &quot;izip&quot;, &quot;zip&quot;),</font>
<font color="black"> 146. </font>
<font color="green"> 147.     MovedModule(&quot;builtins&quot;, &quot;__builtin__&quot;),</font>
<font color="green"> 148.     MovedModule(&quot;configparser&quot;, &quot;ConfigParser&quot;),</font>
<font color="green"> 149.     MovedModule(&quot;copyreg&quot;, &quot;copy_reg&quot;),</font>
<font color="green"> 150.     MovedModule(&quot;http_cookiejar&quot;, &quot;cookielib&quot;, &quot;http.cookiejar&quot;),</font>
<font color="green"> 151.     MovedModule(&quot;http_cookies&quot;, &quot;Cookie&quot;, &quot;http.cookies&quot;),</font>
<font color="green"> 152.     MovedModule(&quot;html_entities&quot;, &quot;htmlentitydefs&quot;, &quot;html.entities&quot;),</font>
<font color="green"> 153.     MovedModule(&quot;html_parser&quot;, &quot;HTMLParser&quot;, &quot;html.parser&quot;),</font>
<font color="green"> 154.     MovedModule(&quot;http_client&quot;, &quot;httplib&quot;, &quot;http.client&quot;),</font>
<font color="green"> 155.     MovedModule(&quot;BaseHTTPServer&quot;, &quot;BaseHTTPServer&quot;, &quot;http.server&quot;),</font>
<font color="green"> 156.     MovedModule(&quot;CGIHTTPServer&quot;, &quot;CGIHTTPServer&quot;, &quot;http.server&quot;),</font>
<font color="green"> 157.     MovedModule(&quot;SimpleHTTPServer&quot;, &quot;SimpleHTTPServer&quot;, &quot;http.server&quot;),</font>
<font color="green"> 158.     MovedModule(&quot;cPickle&quot;, &quot;cPickle&quot;, &quot;pickle&quot;),</font>
<font color="green"> 159.     MovedModule(&quot;queue&quot;, &quot;Queue&quot;),</font>
<font color="green"> 160.     MovedModule(&quot;reprlib&quot;, &quot;repr&quot;),</font>
<font color="green"> 161.     MovedModule(&quot;socketserver&quot;, &quot;SocketServer&quot;),</font>
<font color="green"> 162.     MovedModule(&quot;tkinter&quot;, &quot;Tkinter&quot;),</font>
<font color="green"> 163.     MovedModule(&quot;tkinter_dialog&quot;, &quot;Dialog&quot;, &quot;tkinter.dialog&quot;),</font>
<font color="green"> 164.     MovedModule(&quot;tkinter_filedialog&quot;, &quot;FileDialog&quot;, &quot;tkinter.filedialog&quot;),</font>
<font color="green"> 165.     MovedModule(&quot;tkinter_scrolledtext&quot;, &quot;ScrolledText&quot;, &quot;tkinter.scrolledtext&quot;),</font>
<font color="green"> 166.     MovedModule(&quot;tkinter_simpledialog&quot;, &quot;SimpleDialog&quot;, &quot;tkinter.simpledialog&quot;),</font>
<font color="green"> 167.     MovedModule(&quot;tkinter_tix&quot;, &quot;Tix&quot;, &quot;tkinter.tix&quot;),</font>
<font color="green"> 168.     MovedModule(&quot;tkinter_constants&quot;, &quot;Tkconstants&quot;, &quot;tkinter.constants&quot;),</font>
<font color="green"> 169.     MovedModule(&quot;tkinter_dnd&quot;, &quot;Tkdnd&quot;, &quot;tkinter.dnd&quot;),</font>
<font color="green"> 170.     MovedModule(&quot;tkinter_colorchooser&quot;, &quot;tkColorChooser&quot;,</font>
<font color="green"> 171.                 &quot;tkinter.colorchooser&quot;),</font>
<font color="green"> 172.     MovedModule(&quot;tkinter_commondialog&quot;, &quot;tkCommonDialog&quot;,</font>
<font color="green"> 173.                 &quot;tkinter.commondialog&quot;),</font>
<font color="green"> 174.     MovedModule(&quot;tkinter_tkfiledialog&quot;, &quot;tkFileDialog&quot;, &quot;tkinter.filedialog&quot;),</font>
<font color="green"> 175.     MovedModule(&quot;tkinter_font&quot;, &quot;tkFont&quot;, &quot;tkinter.font&quot;),</font>
<font color="green"> 176.     MovedModule(&quot;tkinter_messagebox&quot;, &quot;tkMessageBox&quot;, &quot;tkinter.messagebox&quot;),</font>
<font color="green"> 177.     MovedModule(&quot;tkinter_tksimpledialog&quot;, &quot;tkSimpleDialog&quot;,</font>
<font color="green"> 178.                 &quot;tkinter.simpledialog&quot;),</font>
<font color="green"> 179.     MovedModule(&quot;urllib_robotparser&quot;, &quot;robotparser&quot;, &quot;urllib.robotparser&quot;),</font>
<font color="green"> 180.     MovedModule(&quot;winreg&quot;, &quot;_winreg&quot;),</font>
<font color="black"> 181. ]</font>
<font color="green"> 182. for attr in _moved_attributes:</font>
<font color="green"> 183.     setattr(_MovedItems, attr.name, attr)</font>
<font color="green"> 184. del attr</font>
<font color="black"> 185. </font>
<font color="green"> 186. moves = sys.modules[__name__ + &quot;.moves&quot;] = _MovedItems(&quot;moves&quot;)</font>
<font color="black"> 187. </font>
<font color="black"> 188. </font>
<font color="green"> 189. def add_move(move):</font>
<font color="black"> 190.     &quot;&quot;&quot;Add an item to six.moves.&quot;&quot;&quot;</font>
<font color="red"> 191.     setattr(_MovedItems, move.name, move)</font>
<font color="black"> 192. </font>
<font color="black"> 193. </font>
<font color="green"> 194. def remove_move(name):</font>
<font color="black"> 195.     &quot;&quot;&quot;Remove item from six.moves.&quot;&quot;&quot;</font>
<font color="red"> 196.     try:</font>
<font color="red"> 197.         delattr(_MovedItems, name)</font>
<font color="red"> 198.     except AttributeError:</font>
<font color="red"> 199.         try:</font>
<font color="red"> 200.             del moves.__dict__[name]</font>
<font color="red"> 201.         except KeyError:</font>
<font color="red"> 202.             raise AttributeError(&quot;no such move, %r&quot; % (name,))</font>
<font color="black"> 203. </font>
<font color="black"> 204. </font>
<font color="green"> 205. if PY3:</font>
<font color="red"> 206.     _meth_func = &quot;__func__&quot;</font>
<font color="red"> 207.     _meth_self = &quot;__self__&quot;</font>
<font color="black"> 208. </font>
<font color="red"> 209.     _func_code = &quot;__code__&quot;</font>
<font color="red"> 210.     _func_defaults = &quot;__defaults__&quot;</font>
<font color="black"> 211. </font>
<font color="red"> 212.     _iterkeys = &quot;keys&quot;</font>
<font color="red"> 213.     _itervalues = &quot;values&quot;</font>
<font color="red"> 214.     _iteritems = &quot;items&quot;</font>
<font color="black"> 215. else:</font>
<font color="green"> 216.     _meth_func = &quot;im_func&quot;</font>
<font color="green"> 217.     _meth_self = &quot;im_self&quot;</font>
<font color="black"> 218. </font>
<font color="green"> 219.     _func_code = &quot;func_code&quot;</font>
<font color="green"> 220.     _func_defaults = &quot;func_defaults&quot;</font>
<font color="black"> 221. </font>
<font color="green"> 222.     _iterkeys = &quot;iterkeys&quot;</font>
<font color="green"> 223.     _itervalues = &quot;itervalues&quot;</font>
<font color="green"> 224.     _iteritems = &quot;iteritems&quot;</font>
<font color="black"> 225. </font>
<font color="black"> 226. </font>
<font color="green"> 227. try:</font>
<font color="green"> 228.     advance_iterator = next</font>
<font color="red"> 229. except NameError:</font>
<font color="red"> 230.     def advance_iterator(it):</font>
<font color="red"> 231.         return it.next()</font>
<font color="green"> 232. next = advance_iterator</font>
<font color="black"> 233. </font>
<font color="black"> 234. </font>
<font color="green"> 235. if PY3:</font>
<font color="red"> 236.     def get_unbound_function(unbound):</font>
<font color="red"> 237.         return unbound</font>
<font color="black"> 238. </font>
<font color="red"> 239.     Iterator = object</font>
<font color="black"> 240. </font>
<font color="red"> 241.     def callable(obj):</font>
<font color="red"> 242.         return any(&quot;__call__&quot; in klass.__dict__ for klass in type(obj).__mro__)</font>
<font color="black"> 243. else:</font>
<font color="green"> 244.     def get_unbound_function(unbound):</font>
<font color="red"> 245.         return unbound.im_func</font>
<font color="black"> 246. </font>
<font color="green"> 247.     class Iterator(object):</font>
<font color="black"> 248. </font>
<font color="green"> 249.         def next(self):</font>
<font color="red"> 250.             return type(self).__next__(self)</font>
<font color="black"> 251. </font>
<font color="green"> 252.     callable = callable</font>
<font color="green"> 253. _add_doc(get_unbound_function,</font>
<font color="green"> 254.          &quot;&quot;&quot;Get the function out of a possibly unbound function&quot;&quot;&quot;)</font>
<font color="black"> 255. </font>
<font color="black"> 256. </font>
<font color="green"> 257. get_method_function = operator.attrgetter(_meth_func)</font>
<font color="green"> 258. get_method_self = operator.attrgetter(_meth_self)</font>
<font color="green"> 259. get_function_code = operator.attrgetter(_func_code)</font>
<font color="green"> 260. get_function_defaults = operator.attrgetter(_func_defaults)</font>
<font color="black"> 261. </font>
<font color="black"> 262. </font>
<font color="green"> 263. def iterkeys(d):</font>
<font color="black"> 264.     &quot;&quot;&quot;Return an iterator over the keys of a dictionary.&quot;&quot;&quot;</font>
<font color="red"> 265.     return iter(getattr(d, _iterkeys)())</font>
<font color="black"> 266. </font>
<font color="green"> 267. def itervalues(d):</font>
<font color="black"> 268.     &quot;&quot;&quot;Return an iterator over the values of a dictionary.&quot;&quot;&quot;</font>
<font color="red"> 269.     return iter(getattr(d, _itervalues)())</font>
<font color="black"> 270. </font>
<font color="green"> 271. def iteritems(d):</font>
<font color="black"> 272.     &quot;&quot;&quot;Return an iterator over the (key, value) pairs of a dictionary.&quot;&quot;&quot;</font>
<font color="red"> 273.     return iter(getattr(d, _iteritems)())</font>
<font color="black"> 274. </font>
<font color="black"> 275. </font>
<font color="green"> 276. if PY3:</font>
<font color="red"> 277.     def b(s):</font>
<font color="red"> 278.         return s.encode(&quot;latin-1&quot;)</font>
<font color="red"> 279.     def u(s):</font>
<font color="red"> 280.         return s</font>
<font color="red"> 281.     if sys.version_info[1] &lt;= 1:</font>
<font color="red"> 282.         def int2byte(i):</font>
<font color="red"> 283.             return bytes((i,))</font>
<font color="black"> 284.     else:</font>
<font color="black"> 285.         # This is about 2x faster than the implementation above on 3.2+</font>
<font color="red"> 286.         int2byte = operator.methodcaller(&quot;to_bytes&quot;, 1, &quot;big&quot;)</font>
<font color="red"> 287.     import io</font>
<font color="red"> 288.     StringIO = io.StringIO</font>
<font color="red"> 289.     BytesIO = io.BytesIO</font>
<font color="black"> 290. else:</font>
<font color="green"> 291.     def b(s):</font>
<font color="red"> 292.         return s</font>
<font color="green"> 293.     def u(s):</font>
<font color="red"> 294.         return unicode(s, &quot;unicode_escape&quot;)</font>
<font color="green"> 295.     int2byte = chr</font>
<font color="green"> 296.     import StringIO</font>
<font color="green"> 297.     StringIO = BytesIO = StringIO.StringIO</font>
<font color="green"> 298. _add_doc(b, &quot;&quot;&quot;Byte literal&quot;&quot;&quot;)</font>
<font color="green"> 299. _add_doc(u, &quot;&quot;&quot;Text literal&quot;&quot;&quot;)</font>
<font color="black"> 300. </font>
<font color="black"> 301. </font>
<font color="green"> 302. if PY3:</font>
<font color="red"> 303.     import builtins</font>
<font color="red"> 304.     exec_ = getattr(builtins, &quot;exec&quot;)</font>
<font color="black"> 305. </font>
<font color="black"> 306. </font>
<font color="red"> 307.     def reraise(tp, value, tb=None):</font>
<font color="red"> 308.         if value.__traceback__ is not tb:</font>
<font color="red"> 309.             raise value.with_traceback(tb)</font>
<font color="red"> 310.         raise value</font>
<font color="black"> 311. </font>
<font color="black"> 312. </font>
<font color="red"> 313.     print_ = getattr(builtins, &quot;print&quot;)</font>
<font color="red"> 314.     del builtins</font>
<font color="black"> 315. </font>
<font color="black"> 316. else:</font>
<font color="green"> 317.     def exec_(code, globs=None, locs=None):</font>
<font color="black"> 318.         &quot;&quot;&quot;Execute code in a namespace.&quot;&quot;&quot;</font>
<font color="green"> 319.         if globs is None:</font>
<font color="green"> 320.             frame = sys._getframe(1)</font>
<font color="green"> 321.             globs = frame.f_globals</font>
<font color="green"> 322.             if locs is None:</font>
<font color="green"> 323.                 locs = frame.f_locals</font>
<font color="green"> 324.             del frame</font>
<font color="red"> 325.         elif locs is None:</font>
<font color="red"> 326.             locs = globs</font>
<font color="green"> 327.         exec(&quot;&quot;&quot;exec code in globs, locs&quot;&quot;&quot;)</font>
<font color="black"> 328. </font>
<font color="black"> 329. </font>
<font color="green"> 330.     exec_(&quot;&quot;&quot;def reraise(tp, value, tb=None):</font>
<font color="black"> 331.     raise tp, value, tb</font>
<font color="green"> 332. &quot;&quot;&quot;)</font>
<font color="black"> 333. </font>
<font color="black"> 334. </font>
<font color="green"> 335.     def print_(*args, **kwargs):</font>
<font color="black"> 336.         &quot;&quot;&quot;The new-style print function.&quot;&quot;&quot;</font>
<font color="red"> 337.         fp = kwargs.pop(&quot;file&quot;, sys.stdout)</font>
<font color="red"> 338.         if fp is None:</font>
<font color="red"> 339.             return</font>
<font color="red"> 340.         def write(data):</font>
<font color="red"> 341.             if not isinstance(data, basestring):</font>
<font color="red"> 342.                 data = str(data)</font>
<font color="red"> 343.             fp.write(data)</font>
<font color="red"> 344.         want_unicode = False</font>
<font color="red"> 345.         sep = kwargs.pop(&quot;sep&quot;, None)</font>
<font color="red"> 346.         if sep is not None:</font>
<font color="red"> 347.             if isinstance(sep, unicode):</font>
<font color="red"> 348.                 want_unicode = True</font>
<font color="red"> 349.             elif not isinstance(sep, str):</font>
<font color="red"> 350.                 raise TypeError(&quot;sep must be None or a string&quot;)</font>
<font color="red"> 351.         end = kwargs.pop(&quot;end&quot;, None)</font>
<font color="red"> 352.         if end is not None:</font>
<font color="red"> 353.             if isinstance(end, unicode):</font>
<font color="red"> 354.                 want_unicode = True</font>
<font color="red"> 355.             elif not isinstance(end, str):</font>
<font color="red"> 356.                 raise TypeError(&quot;end must be None or a string&quot;)</font>
<font color="red"> 357.         if kwargs:</font>
<font color="red"> 358.             raise TypeError(&quot;invalid keyword arguments to print()&quot;)</font>
<font color="red"> 359.         if not want_unicode:</font>
<font color="red"> 360.             for arg in args:</font>
<font color="red"> 361.                 if isinstance(arg, unicode):</font>
<font color="red"> 362.                     want_unicode = True</font>
<font color="red"> 363.                     break</font>
<font color="red"> 364.         if want_unicode:</font>
<font color="red"> 365.             newline = unicode(&quot;\n&quot;)</font>
<font color="red"> 366.             space = unicode(&quot; &quot;)</font>
<font color="black"> 367.         else:</font>
<font color="red"> 368.             newline = &quot;\n&quot;</font>
<font color="red"> 369.             space = &quot; &quot;</font>
<font color="red"> 370.         if sep is None:</font>
<font color="red"> 371.             sep = space</font>
<font color="red"> 372.         if end is None:</font>
<font color="red"> 373.             end = newline</font>
<font color="red"> 374.         for i, arg in enumerate(args):</font>
<font color="red"> 375.             if i:</font>
<font color="red"> 376.                 write(sep)</font>
<font color="red"> 377.             write(arg)</font>
<font color="red"> 378.         write(end)</font>
<font color="black"> 379. </font>
<font color="green"> 380. _add_doc(reraise, &quot;&quot;&quot;Reraise an exception.&quot;&quot;&quot;)</font>
<font color="black"> 381. </font>
<font color="black"> 382. </font>
<font color="green"> 383. def with_metaclass(meta, base=object):</font>
<font color="black"> 384.     &quot;&quot;&quot;Create a base class with a metaclass.&quot;&quot;&quot;</font>
<font color="red"> 385.     return meta(&quot;NewBase&quot;, (base,), {})</font>
</pre>

