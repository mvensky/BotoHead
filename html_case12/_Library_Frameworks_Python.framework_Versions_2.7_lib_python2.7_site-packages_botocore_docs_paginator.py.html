source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/botocore/docs/paginator.py</b><br>


file stats: <b>85 lines, 10 executed: 11.8% covered</b>
<pre>
<font color="black">   1. # Copyright 2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. from botocore import xform_name</font>
<font color="green">  14. from botocore.compat import OrderedDict</font>
<font color="green">  15. from botocore.docs.utils import DocumentedShape</font>
<font color="green">  16. from botocore.utils import get_service_module_name</font>
<font color="green">  17. from botocore.docs.method import document_model_driven_method</font>
<font color="black">  18. </font>
<font color="black">  19. </font>
<font color="green">  20. class PaginatorDocumenter(object):</font>
<font color="green">  21.     def __init__(self, client, service_paginator_model):</font>
<font color="red">  22.         self._client = client</font>
<font color="red">  23.         self._service_name = self._client.meta.service_model.service_name</font>
<font color="red">  24.         self._service_paginator_model = service_paginator_model</font>
<font color="black">  25. </font>
<font color="green">  26.     def document_paginators(self, section):</font>
<font color="black">  27.         &quot;&quot;&quot;Documents the various paginators for a service</font>
<font color="black">  28. </font>
<font color="black">  29.         param section: The section to write to.</font>
<font color="black">  30.         &quot;&quot;&quot;</font>
<font color="red">  31.         section.style.h2('Paginators')</font>
<font color="red">  32.         section.style.new_line()</font>
<font color="red">  33.         section.writeln('The available paginators are:')</font>
<font color="black">  34. </font>
<font color="red">  35.         paginator_names = sorted(</font>
<font color="red">  36.             self._service_paginator_model._paginator_config)</font>
<font color="black">  37. </font>
<font color="black">  38.         # List the available paginators and then document each paginator.</font>
<font color="red">  39.         for paginator_name in paginator_names:</font>
<font color="red">  40.             section.style.li(</font>
<font color="red">  41.                 ':py:class:`%s.Paginator.%s`' % (</font>
<font color="red">  42.                     self._client.__class__.__name__, paginator_name))</font>
<font color="red">  43.             self._add_paginator(section, paginator_name)</font>
<font color="black">  44. </font>
<font color="green">  45.     def _add_paginator(self, section, paginator_name):</font>
<font color="red">  46.         section = section.add_new_section(paginator_name)</font>
<font color="black">  47. </font>
<font color="black">  48.         # Docment the paginator class</font>
<font color="red">  49.         section.style.start_sphinx_py_class(</font>
<font color="red">  50.             class_name='%s.Paginator.%s' % (</font>
<font color="red">  51.                 self._client.__class__.__name__, paginator_name))</font>
<font color="red">  52.         section.style.start_codeblock()</font>
<font color="red">  53.         section.style.new_line()</font>
<font color="black">  54. </font>
<font color="black">  55.         # Document how to instantiate the paginator.</font>
<font color="red">  56.         section.write(</font>
<font color="red">  57.             'paginator = client.get_paginator(\'%s\')' % xform_name(</font>
<font color="red">  58.                 paginator_name)</font>
<font color="black">  59.         )</font>
<font color="red">  60.         section.style.end_codeblock()</font>
<font color="red">  61.         section.style.new_line()</font>
<font color="black">  62.         # Get the pagination model for the particular paginator.</font>
<font color="red">  63.         paginator_config = self._service_paginator_model.get_paginator(</font>
<font color="red">  64.             paginator_name)</font>
<font color="red">  65.         document_paginate_method(</font>
<font color="red">  66.             section=section,</font>
<font color="red">  67.             paginator_name=paginator_name,</font>
<font color="red">  68.             event_emitter=self._client.meta.events,</font>
<font color="red">  69.             service_model=self._client.meta.service_model,</font>
<font color="red">  70.             paginator_config=paginator_config</font>
<font color="black">  71.         )</font>
<font color="black">  72. </font>
<font color="black">  73. </font>
<font color="black">  74. def document_paginate_method(section, paginator_name, event_emitter,</font>
<font color="black">  75.                              service_model, paginator_config,</font>
<font color="green">  76.                              include_signature=True):</font>
<font color="black">  77.     &quot;&quot;&quot;Documents the paginate method of a paginator</font>
<font color="black">  78. </font>
<font color="black">  79.     :param section: The section to write to</font>
<font color="black">  80. </font>
<font color="black">  81.     :param paginator_name: The name of the paginator. It is snake cased.</font>
<font color="black">  82. </font>
<font color="black">  83.     :param event_emitter: The event emitter to use to emit events</font>
<font color="black">  84. </font>
<font color="black">  85.     :param service_model: The service model</font>
<font color="black">  86. </font>
<font color="black">  87.     :param paginator_config: The paginator config associated to a particular</font>
<font color="black">  88.         paginator.</font>
<font color="black">  89. </font>
<font color="black">  90.     :param include_signature: Whether or not to include the signature.</font>
<font color="black">  91.         It is useful for generating docstrings.</font>
<font color="black">  92.     &quot;&quot;&quot;</font>
<font color="black">  93.     # Retrieve the operation model of the underlying operation.</font>
<font color="red">  94.     operation_model = service_model.operation_model(</font>
<font color="red">  95.         paginator_name)</font>
<font color="black">  96. </font>
<font color="black">  97.     # Add representations of the request and response parameters</font>
<font color="black">  98.     # we want to include in the description of the paginate method.</font>
<font color="black">  99.     # These are parameters we expose via the botocore interface.</font>
<font color="red"> 100.     pagination_config_members = OrderedDict()</font>
<font color="black"> 101. </font>
<font color="red"> 102.     pagination_config_members['MaxItems'] = DocumentedShape(</font>
<font color="red"> 103.         name='MaxItems', type_name='integer',</font>
<font color="black"> 104.         documentation=(</font>
<font color="red"> 105.             '&lt;p&gt;The total number of items to return. If the total '</font>
<font color="black"> 106.             'number of items available is more than the value '</font>
<font color="black"> 107.             'specified in max-items then a &lt;code&gt;NextToken&lt;/code&gt; '</font>
<font color="black"> 108.             'will be provided in the output that you can use to '</font>
<font color="black"> 109.             'resume pagination.&lt;/p&gt;'))</font>
<font color="black"> 110. </font>
<font color="red"> 111.     pagination_config_members['PageSize'] = DocumentedShape(</font>
<font color="red"> 112.         name='PageSize', type_name='integer',</font>
<font color="red"> 113.         documentation='&lt;p&gt;The size of each page.&lt;p&gt;')</font>
<font color="black"> 114. </font>
<font color="red"> 115.     pagination_config_members['StartingToken'] = DocumentedShape(</font>
<font color="red"> 116.         name='StartingToken', type_name='string',</font>
<font color="black"> 117.         documentation=(</font>
<font color="red"> 118.             '&lt;p&gt;A token to specify where to start paginating. '</font>
<font color="black"> 119.             'This is the &lt;code&gt;NextToken&lt;/code&gt; from a previous '</font>
<font color="black"> 120.             'response.&lt;/p&gt;'))</font>
<font color="black"> 121. </font>
<font color="black"> 122.     botocore_pagination_params = [</font>
<font color="red"> 123.         DocumentedShape(</font>
<font color="red"> 124.             name='PaginationConfig', type_name='structure',</font>
<font color="black"> 125.             documentation=(</font>
<font color="red"> 126.                 '&lt;p&gt;A dictionary that provides parameters to control '</font>
<font color="black"> 127.                 'pagination.&lt;/p&gt;'),</font>
<font color="red"> 128.             members=pagination_config_members)</font>
<font color="black"> 129.     ]</font>
<font color="black"> 130. </font>
<font color="black"> 131.     botocore_pagination_response_params = [</font>
<font color="red"> 132.         DocumentedShape(</font>
<font color="red"> 133.             name='NextToken', type_name='string',</font>
<font color="black"> 134.             documentation=(</font>
<font color="red"> 135.                 '&lt;p&gt;A token to resume pagination.&lt;/p&gt;'))</font>
<font color="black"> 136.     ]</font>
<font color="black"> 137. </font>
<font color="red"> 138.     service_pagination_params = []</font>
<font color="black"> 139. </font>
<font color="black"> 140.     # Add the normal input token of the method to a list</font>
<font color="black"> 141.     # of input paramters that we wish to hide since we expose our own.</font>
<font color="red"> 142.     if isinstance(paginator_config['input_token'], list):</font>
<font color="red"> 143.         service_pagination_params += paginator_config['input_token']</font>
<font color="black"> 144.     else:</font>
<font color="red"> 145.         service_pagination_params.append(paginator_config['input_token'])</font>
<font color="black"> 146. </font>
<font color="black"> 147.     # Hide the limit key in the documentation.</font>
<font color="red"> 148.     if paginator_config.get('limit_key', None):</font>
<font color="red"> 149.         service_pagination_params.append(paginator_config['limit_key'])</font>
<font color="black"> 150. </font>
<font color="black"> 151.     # Hide the output tokens in the documentation.</font>
<font color="red"> 152.     service_pagination_response_params = []</font>
<font color="red"> 153.     if isinstance(paginator_config['output_token'], list):</font>
<font color="red"> 154.         service_pagination_response_params += paginator_config[</font>
<font color="red"> 155.             'output_token']</font>
<font color="black"> 156.     else:</font>
<font color="red"> 157.         service_pagination_response_params.append(paginator_config[</font>
<font color="red"> 158.             'output_token'])</font>
<font color="black"> 159. </font>
<font color="black"> 160.     paginate_description = (</font>
<font color="red"> 161.         'Creates an iterator that will paginate through responses '</font>
<font color="black"> 162.         'from :py:meth:`{0}.Client.{1}`.'.format(</font>
<font color="red"> 163.             get_service_module_name(service_model), xform_name(paginator_name))</font>
<font color="black"> 164.     )</font>
<font color="black"> 165. </font>
<font color="red"> 166.     document_model_driven_method(</font>
<font color="red"> 167.         section, 'paginate', operation_model,</font>
<font color="red"> 168.         event_emitter=event_emitter,</font>
<font color="red"> 169.         method_description=paginate_description,</font>
<font color="red"> 170.         example_prefix='response_iterator = paginator.paginate',</font>
<font color="red"> 171.         include_input=botocore_pagination_params,</font>
<font color="red"> 172.         include_output=botocore_pagination_response_params,</font>
<font color="red"> 173.         exclude_input=service_pagination_params,</font>
<font color="red"> 174.         exclude_output=service_pagination_response_params,</font>
<font color="red"> 175.         include_signature=include_signature</font>
<font color="black"> 176.     )</font>
</pre>

