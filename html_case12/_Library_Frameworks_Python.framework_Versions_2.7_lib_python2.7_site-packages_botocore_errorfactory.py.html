source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/botocore/errorfactory.py</b><br>


file stats: <b>40 lines, 12 executed: 30.0% covered</b>
<pre>
<font color="black">   1. # Copyright 2016 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. from botocore.exceptions import ClientError</font>
<font color="green">  14. from botocore.utils import get_service_module_name</font>
<font color="black">  15. </font>
<font color="black">  16. </font>
<font color="green">  17. class BaseClientExceptions(object):</font>
<font color="green">  18.     ClientError = ClientError</font>
<font color="black">  19. </font>
<font color="green">  20.     def __init__(self, code_to_exception):</font>
<font color="black">  21.         &quot;&quot;&quot;Base class for exceptions object on a client</font>
<font color="black">  22. </font>
<font color="black">  23.         :type code_to_exception: dict</font>
<font color="black">  24.         :param code_to_exception: Mapping of error codes (strings) to exception</font>
<font color="black">  25.             class that should be raised when encountering a particular</font>
<font color="black">  26.             error code.</font>
<font color="black">  27.         &quot;&quot;&quot;</font>
<font color="red">  28.         self._code_to_exception = code_to_exception</font>
<font color="black">  29. </font>
<font color="green">  30.     def from_code(self, error_code):</font>
<font color="black">  31.         &quot;&quot;&quot;Retrieves the error class based on the error code</font>
<font color="black">  32. </font>
<font color="black">  33.         This is helpful for identifying the exception class needing to be</font>
<font color="black">  34.         caught based on the ClientError.parsed_reponse['Error']['Code'] value</font>
<font color="black">  35. </font>
<font color="black">  36.         :type error_code: string</font>
<font color="black">  37.         :param error_code: The error code associated to a ClientError exception</font>
<font color="black">  38. </font>
<font color="black">  39.         :rtype: ClientError or a subclass of ClientError</font>
<font color="black">  40.         :returns: The appropriate modeled exception class for that error</font>
<font color="black">  41.             code. If the error code does not match any of the known</font>
<font color="black">  42.             modeled exceptions then return a generic ClientError.</font>
<font color="black">  43.         &quot;&quot;&quot;</font>
<font color="red">  44.         return self._code_to_exception.get(error_code, self.ClientError)</font>
<font color="black">  45. </font>
<font color="green">  46.     def __getattr__(self, name):</font>
<font color="black">  47.         exception_cls_names = [</font>
<font color="red">  48.             exception_cls.__name__ for exception_cls</font>
<font color="red">  49.             in self._code_to_exception.values()</font>
<font color="black">  50.         ]</font>
<font color="red">  51.         raise AttributeError(</font>
<font color="red">  52.             '%r object has no attribute %r. Valid exceptions are: %s' % (</font>
<font color="red">  53.                 self, name, ', '.join(exception_cls_names)))</font>
<font color="black">  54. </font>
<font color="black">  55. </font>
<font color="green">  56. class ClientExceptionsFactory(object):</font>
<font color="green">  57.     def __init__(self):</font>
<font color="green">  58.         self._client_exceptions_cache = {}</font>
<font color="black">  59. </font>
<font color="green">  60.     def create_client_exceptions(self, service_model):</font>
<font color="black">  61.         &quot;&quot;&quot;Creates a ClientExceptions object for the particular service client</font>
<font color="black">  62. </font>
<font color="black">  63.         :type service_model: botocore.model.ServiceModel</font>
<font color="black">  64.         :param service_model: The service model for the client</font>
<font color="black">  65. </font>
<font color="black">  66.         :rtype: object that subclasses from BaseClientExceptions</font>
<font color="black">  67.         :returns: The exceptions object of a client that can be used</font>
<font color="black">  68.             to grab the various different modeled exceptions.</font>
<font color="black">  69.         &quot;&quot;&quot;</font>
<font color="red">  70.         service_name = service_model.service_name</font>
<font color="red">  71.         if service_name not in self._client_exceptions_cache:</font>
<font color="red">  72.             client_exceptions = self._create_client_exceptions(service_model)</font>
<font color="red">  73.             self._client_exceptions_cache[service_name] = client_exceptions</font>
<font color="red">  74.         return self._client_exceptions_cache[service_name]</font>
<font color="black">  75. </font>
<font color="green">  76.     def _create_client_exceptions(self, service_model):</font>
<font color="red">  77.         cls_props = {}</font>
<font color="red">  78.         code_to_exception = {}</font>
<font color="red">  79.         for shape_name in service_model.shape_names:</font>
<font color="red">  80.             shape = service_model.shape_for(shape_name)</font>
<font color="red">  81.             if shape.metadata.get('exception', False):</font>
<font color="red">  82.                 exception_name = str(shape.name)</font>
<font color="red">  83.                 exception_cls = type(exception_name, (ClientError,), {})</font>
<font color="red">  84.                 code = shape.metadata.get(&quot;error&quot;, {}).get(&quot;code&quot;)</font>
<font color="red">  85.                 cls_props[exception_name] = exception_cls</font>
<font color="red">  86.                 if code:</font>
<font color="red">  87.                     code_to_exception[code] = exception_cls</font>
<font color="black">  88.                 else:</font>
<font color="black">  89.                     # Use the exception name if there is no explicit code</font>
<font color="black">  90.                     # modeled</font>
<font color="red">  91.                     code_to_exception[exception_name] = exception_cls</font>
<font color="red">  92.         cls_name = str(get_service_module_name(service_model) + 'Exceptions')</font>
<font color="red">  93.         client_exceptions_cls = type(</font>
<font color="red">  94.             cls_name, (BaseClientExceptions,), cls_props)</font>
<font color="red">  95.         return client_exceptions_cls(code_to_exception)</font>
</pre>

