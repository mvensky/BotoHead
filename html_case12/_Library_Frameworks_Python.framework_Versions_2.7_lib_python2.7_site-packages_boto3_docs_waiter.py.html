source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto3/docs/waiter.py</b><br>


file stats: <b>58 lines, 10 executed: 17.2% covered</b>
<pre>
<font color="black">   1. # Copyright 2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. from botocore import xform_name</font>
<font color="green">  14. from botocore.utils import get_service_module_name</font>
<font color="green">  15. from botocore.docs.method import document_model_driven_method</font>
<font color="black">  16. </font>
<font color="green">  17. from boto3.docs.base import BaseDocumenter</font>
<font color="green">  18. from boto3.docs.utils import get_resource_ignore_params</font>
<font color="green">  19. from boto3.docs.utils import add_resource_type_overview</font>
<font color="black">  20. </font>
<font color="black">  21. </font>
<font color="green">  22. class WaiterResourceDocumenter(BaseDocumenter):</font>
<font color="green">  23.     def __init__(self, resource, service_waiter_model):</font>
<font color="red">  24.         super(WaiterResourceDocumenter, self).__init__(resource)</font>
<font color="red">  25.         self._service_waiter_model = service_waiter_model</font>
<font color="black">  26. </font>
<font color="green">  27.     def document_resource_waiters(self, section):</font>
<font color="red">  28.         waiters = self._resource.meta.resource_model.waiters</font>
<font color="red">  29.         add_resource_type_overview(</font>
<font color="red">  30.             section=section,</font>
<font color="red">  31.             resource_type='Waiters',</font>
<font color="black">  32.             description=(</font>
<font color="red">  33.                 'Waiters provide an interface to wait for a resource'</font>
<font color="black">  34.                 ' to reach a specific state.'),</font>
<font color="red">  35.             intro_link='waiters_intro')</font>
<font color="red">  36.         waiter_list = []</font>
<font color="red">  37.         self.member_map['waiters'] = waiter_list</font>
<font color="red">  38.         for waiter in waiters:</font>
<font color="red">  39.             waiter_section = section.add_new_section(waiter.name)</font>
<font color="red">  40.             waiter_list.append(waiter.name)</font>
<font color="red">  41.             document_resource_waiter(</font>
<font color="red">  42.                 section=waiter_section,</font>
<font color="red">  43.                 resource_name=self._resource_name,</font>
<font color="red">  44.                 event_emitter=self._resource.meta.client.meta.events,</font>
<font color="red">  45.                 service_model=self._service_model,</font>
<font color="red">  46.                 resource_waiter_model=waiter,</font>
<font color="red">  47.                 service_waiter_model=self._service_waiter_model</font>
<font color="black">  48.             )</font>
<font color="black">  49. </font>
<font color="black">  50. </font>
<font color="black">  51. def document_resource_waiter(section, resource_name, event_emitter,</font>
<font color="black">  52.                              service_model, resource_waiter_model,</font>
<font color="green">  53.                              service_waiter_model, include_signature=True):</font>
<font color="red">  54.     waiter_model = service_waiter_model.get_waiter(</font>
<font color="red">  55.         resource_waiter_model.waiter_name)</font>
<font color="red">  56.     operation_model = service_model.operation_model(</font>
<font color="red">  57.         waiter_model.operation)</font>
<font color="black">  58. </font>
<font color="red">  59.     ignore_params = get_resource_ignore_params(resource_waiter_model.params)</font>
<font color="red">  60.     service_module_name = get_service_module_name(service_model)</font>
<font color="black">  61.     description = (</font>
<font color="red">  62.         'Waits until this %s is %s. This method calls '</font>
<font color="black">  63.         ':py:meth:`%s.Waiter.%s.wait` which polls. '</font>
<font color="black">  64.         ':py:meth:`%s.Client.%s` every %s seconds until '</font>
<font color="black">  65.         'a successful state is reached. An error is returned '</font>
<font color="black">  66.         'after %s failed checks.' % (</font>
<font color="red">  67.             resource_name, ' '.join(resource_waiter_model.name.split('_')[2:]),</font>
<font color="red">  68.             service_module_name,</font>
<font color="red">  69.             xform_name(resource_waiter_model.waiter_name),</font>
<font color="red">  70.             service_module_name,</font>
<font color="red">  71.             xform_name(waiter_model.operation),</font>
<font color="red">  72.             waiter_model.delay, waiter_model.max_attempts))</font>
<font color="red">  73.     example_prefix = '%s.%s' % (</font>
<font color="red">  74.         xform_name(resource_name), resource_waiter_model.name)</font>
<font color="red">  75.     document_model_driven_method(</font>
<font color="red">  76.         section=section, method_name=resource_waiter_model.name,</font>
<font color="red">  77.         operation_model=operation_model,</font>
<font color="red">  78.         event_emitter=event_emitter,</font>
<font color="red">  79.         example_prefix=example_prefix,</font>
<font color="red">  80.         method_description=description,</font>
<font color="red">  81.         exclude_input=ignore_params,</font>
<font color="red">  82.         include_signature=include_signature</font>
<font color="black">  83.     )</font>
<font color="red">  84.     if 'return' in section.available_sections:</font>
<font color="black">  85.         # Waiters do not return anything so we should remove</font>
<font color="black">  86.         # any sections that may document the underlying return</font>
<font color="black">  87.         # value of the client method.</font>
<font color="red">  88.         return_section = section.get_section('return')</font>
<font color="red">  89.         return_section.clear_text()</font>
<font color="red">  90.         return_section.remove_all_sections()</font>
<font color="red">  91.         return_section.write(':returns: None')</font>
</pre>

