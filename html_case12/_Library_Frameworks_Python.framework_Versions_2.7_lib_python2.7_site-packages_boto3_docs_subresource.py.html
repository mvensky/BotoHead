source file: <b>/Library/Frameworks/Python.framework/Versions/2.7/lib/python2.7/site-packages/boto3/docs/subresource.py</b><br>


file stats: <b>71 lines, 10 executed: 14.1% covered</b>
<pre>
<font color="black">   1. # Copyright 2015 Amazon.com, Inc. or its affiliates. All Rights Reserved.</font>
<font color="black">   2. #</font>
<font color="black">   3. # Licensed under the Apache License, Version 2.0 (the &quot;License&quot;). You</font>
<font color="black">   4. # may not use this file except in compliance with the License. A copy of</font>
<font color="black">   5. # the License is located at</font>
<font color="black">   6. #</font>
<font color="black">   7. # http://aws.amazon.com/apache2.0/</font>
<font color="black">   8. #</font>
<font color="black">   9. # or in the &quot;license&quot; file accompanying this file. This file is</font>
<font color="black">  10. # distributed on an &quot;AS IS&quot; BASIS, WITHOUT WARRANTIES OR CONDITIONS OF</font>
<font color="black">  11. # ANY KIND, either express or implied. See the License for the specific</font>
<font color="black">  12. # language governing permissions and limitations under the License.</font>
<font color="green">  13. from botocore import xform_name</font>
<font color="green">  14. from botocore.utils import get_service_module_name</font>
<font color="black">  15. </font>
<font color="green">  16. from boto3.docs.base import BaseDocumenter</font>
<font color="green">  17. from boto3.docs.utils import get_identifier_args_for_signature</font>
<font color="green">  18. from boto3.docs.utils import get_identifier_values_for_example</font>
<font color="green">  19. from boto3.docs.utils import get_identifier_description</font>
<font color="green">  20. from boto3.docs.utils import add_resource_type_overview</font>
<font color="black">  21. </font>
<font color="black">  22. </font>
<font color="green">  23. class SubResourceDocumenter(BaseDocumenter):</font>
<font color="green">  24.     def document_sub_resources(self, section):</font>
<font color="red">  25.         add_resource_type_overview(</font>
<font color="red">  26.             section=section,</font>
<font color="red">  27.             resource_type='Sub-resources',</font>
<font color="black">  28.             description=(</font>
<font color="red">  29.                 'Sub-resources are methods that create a new instance of a'</font>
<font color="black">  30.                 ' child resource. This resource\'s identifiers get passed'</font>
<font color="black">  31.                 ' along to the child.'),</font>
<font color="red">  32.             intro_link='subresources_intro')</font>
<font color="red">  33.         sub_resources = sorted(</font>
<font color="red">  34.             self._resource.meta.resource_model.subresources,</font>
<font color="red">  35.             key=lambda sub_resource: sub_resource.name</font>
<font color="black">  36.         )</font>
<font color="red">  37.         sub_resources_list = []</font>
<font color="red">  38.         self.member_map['sub-resources'] = sub_resources_list</font>
<font color="red">  39.         for sub_resource in sub_resources:</font>
<font color="red">  40.             sub_resource_section = section.add_new_section(sub_resource.name)</font>
<font color="red">  41.             sub_resources_list.append(sub_resource.name)</font>
<font color="red">  42.             document_sub_resource(</font>
<font color="red">  43.                 section=sub_resource_section,</font>
<font color="red">  44.                 resource_name=self._resource_name,</font>
<font color="red">  45.                 sub_resource_model=sub_resource,</font>
<font color="red">  46.                 service_model=self._service_model</font>
<font color="black">  47.             )</font>
<font color="black">  48. </font>
<font color="black">  49. </font>
<font color="black">  50. def document_sub_resource(section, resource_name, sub_resource_model,</font>
<font color="green">  51.                           service_model, include_signature=True):</font>
<font color="black">  52.     &quot;&quot;&quot;Documents a resource action</font>
<font color="black">  53. </font>
<font color="black">  54.     :param section: The section to write to</font>
<font color="black">  55. </font>
<font color="black">  56.     :param resource_name: The name of the resource</font>
<font color="black">  57. </font>
<font color="black">  58.     :param sub_resource_model: The model of the subresource</font>
<font color="black">  59. </font>
<font color="black">  60.     :param service_model: The model of the service</font>
<font color="black">  61. </font>
<font color="black">  62.     :param include_signature: Whether or not to include the signature.</font>
<font color="black">  63.         It is useful for generating docstrings.</font>
<font color="black">  64.     &quot;&quot;&quot;</font>
<font color="red">  65.     identifiers_needed = []</font>
<font color="red">  66.     for identifier in sub_resource_model.resource.identifiers:</font>
<font color="red">  67.         if identifier.source == 'input':</font>
<font color="red">  68.             identifiers_needed.append(xform_name(identifier.target))</font>
<font color="black">  69. </font>
<font color="red">  70.     if include_signature:</font>
<font color="red">  71.         signature_args = get_identifier_args_for_signature(identifiers_needed)</font>
<font color="red">  72.         section.style.start_sphinx_py_method(</font>
<font color="red">  73.             sub_resource_model.name, signature_args)</font>
<font color="black">  74. </font>
<font color="red">  75.     method_intro_section = section.add_new_section(</font>
<font color="red">  76.         'method-intro')</font>
<font color="red">  77.     description = 'Creates a %s resource.' % sub_resource_model.resource.type</font>
<font color="red">  78.     method_intro_section.include_doc_string(description)</font>
<font color="red">  79.     example_section = section.add_new_section('example')</font>
<font color="red">  80.     example_values = get_identifier_values_for_example(identifiers_needed)</font>
<font color="red">  81.     example_resource_name = xform_name(resource_name)</font>
<font color="red">  82.     if service_model.service_name == resource_name:</font>
<font color="red">  83.         example_resource_name = resource_name</font>
<font color="red">  84.     example = '%s = %s.%s(%s)' % (</font>
<font color="red">  85.         xform_name(sub_resource_model.resource.type),</font>
<font color="red">  86.         example_resource_name,</font>
<font color="red">  87.         sub_resource_model.name, example_values</font>
<font color="black">  88.     )</font>
<font color="red">  89.     example_section.style.start_codeblock()</font>
<font color="red">  90.     example_section.write(example)</font>
<font color="red">  91.     example_section.style.end_codeblock()</font>
<font color="black">  92. </font>
<font color="red">  93.     param_section = section.add_new_section('params')</font>
<font color="red">  94.     for identifier in identifiers_needed:</font>
<font color="red">  95.         description = get_identifier_description(</font>
<font color="red">  96.             sub_resource_model.name, identifier)</font>
<font color="red">  97.         param_section.write(':type %s: string' % identifier)</font>
<font color="red">  98.         param_section.style.new_line()</font>
<font color="red">  99.         param_section.write(':param %s: %s' % (</font>
<font color="red"> 100.             identifier, description))</font>
<font color="red"> 101.         param_section.style.new_line()</font>
<font color="black"> 102. </font>
<font color="red"> 103.     return_section = section.add_new_section('return')</font>
<font color="red"> 104.     return_section.style.new_line()</font>
<font color="red"> 105.     return_section.write(</font>
<font color="red"> 106.         ':rtype: :py:class:`%s.%s`' % (</font>
<font color="red"> 107.             get_service_module_name(service_model),</font>
<font color="red"> 108.             sub_resource_model.resource.type))</font>
<font color="red"> 109.     return_section.style.new_line()</font>
<font color="red"> 110.     return_section.write(</font>
<font color="red"> 111.         ':returns: A %s resource' % sub_resource_model.resource.type)</font>
<font color="red"> 112.     return_section.style.new_line()</font>
</pre>

